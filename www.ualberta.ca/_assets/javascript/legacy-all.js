var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.LazyLoad=t()}(this,function(){"use strict";function u(e,t){e&&e(t)}function n(e){return e.getBoundingClientRect().top+window.pageYOffset-e.ownerDocument.documentElement.clientTop}function i(e){return e.getBoundingClientRect().left+window.pageXOffset-e.ownerDocument.documentElement.clientLeft}function r(e,t){var a,n=new e(t);try{a=new CustomEvent("LazyLoad::Initialized",{detail:{instance:n}})}catch(e){(a=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:n})}window.dispatchEvent(a)}function l(e,t){return e.getAttribute("data-"+t)}function o(e){return"true"===l(e,"was-processed")}function s(e,t){return t?e.replace(/\.(jpe?g|png)/gi,".webp"):e}function c(e,t,a,n){for(var i,r=0;i=e.children[r];r+=1)if("SOURCE"===i.tagName){var o=l(i,a);S(i,t,o,n)}}function d(e,t){var a=e.tagName,n=T[a];n?n(e,t):function(e,t){var a=C&&t.to_webp,n=l(e,t.data_src);if(n){var i=s(n,a);e.style.backgroundImage='url("'+i+'")'}}(e,t)}function p(e,t){b?e.classList.add(t):e.className+=(e.className?" ":"")+t}function h(e,t){b?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")}function e(e){this._settings=_extends({},{elements_selector:"img",container:window,threshold:300,throttle:150,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_initial:"initial",skip_invisible:!0,callback_load:null,callback_error:null,callback_set:null,callback_processed:null,callback_enter:null,to_webp:!1},e),this._queryOriginNode=this._settings.container===window?document:this._settings.container,this._previousLoopTime=0,this._loopTimeout=null,this._boundHandleScroll=this.handleScroll.bind(this),this._isFirstLoop=!0,window.addEventListener("resize",this._boundHandleScroll),this.update()}var t,f=function(e,t,a){return(t===window?window.innerHeight+window.pageYOffset:n(t)+t.offsetHeight)<=n(e)-a},m=function(e,t,a){var n=window.innerWidth;return(t===window?n+window.pageXOffset:i(t)+n)<=i(e)-a},g=function(e,t,a){return(t===window?window.pageYOffset:n(t))>=n(e)+a+e.offsetHeight},v=function(e,t,a){return(t===window?window.pageXOffset:i(t))>=i(e)+a+e.offsetWidth},a="undefined"!=typeof window,y=a&&!("onscroll"in window)||/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),b=a&&"classList"in document.createElement("p"),C=a&&(!(!(t=document.createElement("canvas")).getContext||!t.getContext("2d"))&&0===t.toDataURL("image/webp").indexOf("data:image/webp")),S=function(e,t,a,n){a&&e.setAttribute(t,s(a,n))},T={IMG:function(e,t){var a=C&&t.to_webp,n=t.data_srcset,i=e.parentNode;i&&"PICTURE"===i.tagName&&c(i,"srcset",n,a);var r=l(e,t.data_sizes);S(e,"sizes",r);var o=l(e,n);S(e,"srcset",o,a);var s=l(e,t.data_src);S(e,"src",s,a)},IFRAME:function(e,t){var a=l(e,t.data_src);S(e,"src",a)},VIDEO:function(e,t){var a=t.data_src,n=l(e,a);c(e,"src",a),S(e,"src",n)}};return e.prototype={_reveal:function(t,e){if(e||!o(t)){var a=this._settings,n=function e(){a&&(t.removeEventListener("load",i),t.removeEventListener("error",e),h(t,a.class_loading),p(t,a.class_error),u(a.callback_error,t))},i=function e(){a&&(h(t,a.class_loading),p(t,a.class_loaded),t.removeEventListener("load",e),t.removeEventListener("error",n),u(a.callback_load,t))};u(a.callback_enter,t),-1<["IMG","IFRAME","VIDEO"].indexOf(t.tagName)&&(t.addEventListener("load",i),t.addEventListener("error",n),p(t,a.class_loading)),d(t,a),u(a.callback_set,t)}},_loopThroughElements:function(e){var t,a,n,i=this._settings,r=this._elements,o=r?r.length:0,s=void 0,l=[],c=this._isFirstLoop;for(s=0;s<o;s++){var d=r[s];i.skip_invisible&&null===d.offsetParent||!y&&!e&&(t=d,a=i.container,n=i.threshold,f(t,a,n)||g(t,a,n)||m(t,a,n)||v(t,a,n))||(c&&p(d,i.class_initial),this.load(d),l.push(s),function(e,t,a){e.setAttribute("data-"+t,a)}(d,"was-processed","true"))}for(;l.length;)r.splice(l.pop(),1),u(i.callback_processed,r.length);0===o&&this._stopScrollHandler(),c&&(this._isFirstLoop=!1)},_purgeElements:function(){var e=this._elements,t=e.length,a=void 0,n=[];for(a=0;a<t;a++){var i=e[a];o(i)&&n.push(a)}for(;0<n.length;)e.splice(n.pop(),1)},_startScrollHandler:function(){this._isHandlingScroll||(this._isHandlingScroll=!0,this._settings.container.addEventListener("scroll",this._boundHandleScroll))},_stopScrollHandler:function(){this._isHandlingScroll&&(this._isHandlingScroll=!1,this._settings.container.removeEventListener("scroll",this._boundHandleScroll))},handleScroll:function(){var e=this._settings.throttle;if(0!==e){var t=Date.now(),a=e-(t-this._previousLoopTime);a<=0||e<a?(this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._previousLoopTime=t,this._loopThroughElements()):this._loopTimeout||(this._loopTimeout=setTimeout(function(){this._previousLoopTime=Date.now(),this._loopTimeout=null,this._loopThroughElements()}.bind(this),a))}else this._loopThroughElements()},loadAll:function(){this._loopThroughElements(!0)},update:function(){this._elements=Array.prototype.slice.call(this._queryOriginNode.querySelectorAll(this._settings.elements_selector)),this._purgeElements(),this._loopThroughElements(),this._startScrollHandler()},destroy:function(){window.removeEventListener("resize",this._boundHandleScroll),this._loopTimeout&&(clearTimeout(this._loopTimeout),this._loopTimeout=null),this._stopScrollHandler(),this._elements=null,this._queryOriginNode=null,this._settings=null},load:function(e,t){this._reveal(e,t)}},a&&function(e,t){if(t)if(t.length)for(var a,n=0;a=t[n];n+=1)r(e,a);else r(e,t)}(e,window.lazyLoadOptions),e}),function($){var escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(e){if(null===e)return"null";var t=typeof e;if("undefined"!==t){if("number"===t||"boolean"===t)return""+e;if("string"===t)return $.quoteString(e);if("object"===t){if("function"==typeof e.toJSON)return $.toJSON(e.toJSON());if(e.constructor===Date){var a=e.getUTCMonth()+1,n=e.getUTCDate(),i=e.getUTCFullYear(),r=e.getUTCHours(),o=e.getUTCMinutes(),s=e.getUTCSeconds(),l=e.getUTCMilliseconds();return a<10&&(a="0"+a),n<10&&(n="0"+n),r<10&&(r="0"+r),o<10&&(o="0"+o),s<10&&(s="0"+s),l<100&&(l="0"+l),l<10&&(l="0"+l),'"'+i+"-"+a+"-"+n+"T"+r+":"+o+":"+s+"."+l+'Z"'}if(e.constructor===Array){for(var c=[],d=0;d<e.length;d++)c.push($.toJSON(e[d])||"null");return"["+c.join(",")+"]"}var u,p,h=[];for(var f in e){if("number"===(t=typeof f))u='"'+f+'"';else{if("string"!==t)continue;u=$.quoteString(f)}"function"!==(t=typeof e[f])&&"undefined"!==t&&(p=$.toJSON(e[f]),h.push(u+":"+p))}return"{"+h.join(",")+"}"}}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(src){return eval("("+src+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(src){var filtered=src.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(e){return e.match(escapeable)?'"'+e.replace(escapeable,function(e){var t=meta[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'}}(jQuery),function(u){u.flexslider=function(g,e){var v=u(g);v.vars=u.extend({},u.flexslider.defaults,e);var t,s=v.vars.namespace,y=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,l=("ontouchstart"in window||y||window.DocumentTouch&&document instanceof DocumentTouch)&&v.vars.touch,i="",b="vertical"===v.vars.direction,C=v.vars.reverse,S=0<v.vars.itemWidth,T="fade"===v.vars.animation,c=""!==v.vars.asNavFor,d={};u.data(g,"flexslider",v),d={init:function(){v.animating=!1,v.currentSlide=parseInt(v.vars.startAt?v.vars.startAt:0,10),isNaN(v.currentSlide)&&(v.currentSlide=0),v.animatingTo=v.currentSlide,v.atEnd=0===v.currentSlide||v.currentSlide===v.last,v.containerSelector=v.vars.selector.substr(0,v.vars.selector.search(" ")),v.slides=u(v.vars.selector,v),v.container=u(v.containerSelector,v),v.count=v.slides.length,v.syncExists=0<u(v.vars.sync).length,"slide"===v.vars.animation&&(v.vars.animation="swing"),v.prop=b?"top":"marginLeft",v.args={},v.manualPause=!1,v.stopped=!1,v.started=!1,v.startTimeout=null,v.transitions=!v.vars.video&&!T&&v.vars.useCSS&&function(){var e,t=document.createElement("div"),a=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(e in a)if(void 0!==t.style[a[e]])return v.pfx=a[e].replace("Perspective","").toLowerCase(),v.prop="-"+v.pfx+"-transform",!0;return!1}(),""!==v.vars.controlsContainer&&(v.controlsContainer=0<u(v.vars.controlsContainer).length&&u(v.vars.controlsContainer)),""!==v.vars.manualControls&&(v.manualControls=0<u(v.vars.manualControls).length&&u(v.vars.manualControls)),v.vars.randomize&&(v.slides.sort(function(){return Math.round(Math.random())-.5}),v.container.empty().append(v.slides)),v.doMath(),v.setup("init"),v.vars.controlNav&&d.controlNav.setup(),v.vars.directionNav&&d.directionNav.setup(),v.vars.keyboard&&(1===u(v.containerSelector).length||v.vars.multipleKeyboard)&&u(document).bind("keyup",function(e){e=e.keyCode,v.animating||39!==e&&37!==e||(e=39===e?v.getTarget("next"):37===e&&v.getTarget("prev"),v.flexAnimate(e,v.vars.pauseOnAction))}),v.vars.mousewheel&&v.bind("mousewheel",function(e,t,a,n){e.preventDefault(),e=t<0?v.getTarget("next"):v.getTarget("prev"),v.flexAnimate(e,v.vars.pauseOnAction)}),v.vars.pausePlay&&d.pausePlay.setup(),v.vars.slideshow&&v.vars.pauseInvisible&&d.pauseInvisible.init(),v.vars.slideshow&&(v.vars.pauseOnHover&&v.hover(function(){v.manualPlay||v.manualPause||v.pause()},function(){v.manualPause||v.manualPlay||v.stopped||v.play()}),v.vars.pauseInvisible&&d.pauseInvisible.isHidden()||(0<v.vars.initDelay?v.startTimeout=setTimeout(v.play,v.vars.initDelay):v.play())),c&&d.asNav.setup(),l&&v.vars.touch&&d.touch(),(!T||T&&v.vars.smoothHeight)&&u(window).bind("resize orientationchange focus",d.resize),v.find("img").attr("draggable","false"),setTimeout(function(){v.vars.start(v)},200)},asNav:{setup:function(){v.asNav=!0,v.animatingTo=Math.floor(v.currentSlide/v.move),v.currentItem=v.currentSlide,v.slides.removeClass(s+"active-slide").eq(v.currentItem).addClass(s+"active-slide"),y?(g._slider=v).slides.each(function(){this._gesture=new MSGesture,(this._gesture.target=this).addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),this.addEventListener("MSGestureTap",function(e){e.preventDefault();var t=(e=u(this)).index();u(v.vars.asNavFor).data("flexslider").animating||e.hasClass("active")||(v.direction=v.currentItem<t?"next":"prev",v.flexAnimate(t,v.vars.pauseOnAction,!1,!0,!0))})}):v.slides.on("click touchend MSPointerUp",function(e){e.preventDefault();var t=(e=u(this)).index();e.offset().left-u(v).scrollLeft()<=0&&e.hasClass(s+"active-slide")?v.flexAnimate(v.getTarget("prev"),!0):u(v.vars.asNavFor).data("flexslider").animating||e.hasClass(s+"active-slide")||(v.direction=v.currentItem<t?"next":"prev",v.flexAnimate(t,v.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){v.manualControls?d.controlNav.setupManual():d.controlNav.setupPaging()},setupPaging:function(){var e,t,a=1;if(v.controlNavScaffold=u('<ol class="'+s+"control-nav "+s+("thumbnails"===v.vars.controlNav?"control-thumbs":"control-paging")+'"></ol>'),1<v.pagingCount)for(var n=0;n<v.pagingCount;n++)t=v.slides.eq(n),e="thumbnails"===v.vars.controlNav?'<img src="'+t.attr("data-thumb")+'"/>':"<a>"+a+"</a>","thumbnails"===v.vars.controlNav&&!0===v.vars.thumbCaptions&&(""!=(t=t.attr("data-thumbcaption"))&&null!=t&&(e+='<span class="'+s+'caption">'+t+"</span>")),v.controlNavScaffold.append("<li>"+e+"</li>"),a++;v.controlsContainer?u(v.controlsContainer).append(v.controlNavScaffold):v.append(v.controlNavScaffold),d.controlNav.set(),d.controlNav.active(),v.controlNavScaffold.delegate("a, img","click touchend MSPointerUp",function(e){if(e.preventDefault(),""===i||i===e.type){var t=u(this),a=v.controlNav.index(t);t.hasClass(s+"active")||(v.direction=a>v.currentSlide?"next":"prev",v.flexAnimate(a,v.vars.pauseOnAction))}""===i&&(i=e.type),d.setToClearWatchedEvent()})},setupManual:function(){v.controlNav=v.manualControls,d.controlNav.active(),v.controlNav.bind("click touchend MSPointerUp",function(e){if(e.preventDefault(),""===i||i===e.type){var t=u(this),a=v.controlNav.index(t);t.hasClass(s+"active")||(a>v.currentSlide?v.direction="next":v.direction="prev",v.flexAnimate(a,v.vars.pauseOnAction))}""===i&&(i=e.type),d.setToClearWatchedEvent()})},set:function(){v.controlNav=u("."+s+"control-nav li "+("thumbnails"===v.vars.controlNav?"img":"a"),v.controlsContainer?v.controlsContainer:v)},active:function(){v.controlNav.removeClass(s+"active").eq(v.animatingTo).addClass(s+"active")},update:function(e,t){1<v.pagingCount&&"add"===e?v.controlNavScaffold.append(u("<li><a>"+v.count+"</a></li>")):1===v.pagingCount?v.controlNavScaffold.find("li").remove():v.controlNav.eq(t).closest("li").remove(),d.controlNav.set(),1<v.pagingCount&&v.pagingCount!==v.controlNav.length?v.update(t,e):d.controlNav.active()}},directionNav:{setup:function(){var e=u('<ul class="'+s+'direction-nav"><li><a class="'+s+'prev" href="#">'+v.vars.prevText+'</a></li><li><a class="'+s+'next" href="#">'+v.vars.nextText+"</a></li></ul>");v.controlsContainer?(u(v.controlsContainer).append(e),v.directionNav=u("."+s+"direction-nav li a",v.controlsContainer)):(v.append(e),v.directionNav=u("."+s+"direction-nav li a",v)),d.directionNav.update(),v.directionNav.bind("click touchend MSPointerUp",function(e){var t;e.preventDefault(),""!==i&&i!==e.type||(t=u(this).hasClass(s+"next")?v.getTarget("next"):v.getTarget("prev"),v.flexAnimate(t,v.vars.pauseOnAction)),""===i&&(i=e.type),d.setToClearWatchedEvent()})},update:function(){var e=s+"disabled";1===v.pagingCount?v.directionNav.addClass(e).attr("tabindex","-1"):v.vars.animationLoop?v.directionNav.removeClass(e).removeAttr("tabindex"):0===v.animatingTo?v.directionNav.removeClass(e).filter("."+s+"prev").addClass(e).attr("tabindex","-1"):v.animatingTo===v.last?v.directionNav.removeClass(e).filter("."+s+"next").addClass(e).attr("tabindex","-1"):v.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var e=u('<div class="'+s+'pauseplay"><a></a></div>');v.controlsContainer?(v.controlsContainer.append(e),v.pausePlay=u("."+s+"pauseplay a",v.controlsContainer)):(v.append(e),v.pausePlay=u("."+s+"pauseplay a",v)),d.pausePlay.update(v.vars.slideshow?s+"pause":s+"play"),v.pausePlay.bind("click touchend MSPointerUp",function(e){e.preventDefault(),""!==i&&i!==e.type||(u(this).hasClass(s+"pause")?(v.manualPause=!0,v.manualPlay=!1,v.pause()):(v.manualPause=!1,v.manualPlay=!0,v.play())),""===i&&(i=e.type),d.setToClearWatchedEvent()})},update:function(e){"play"===e?v.pausePlay.removeClass(s+"pause").addClass(s+"play").html(v.vars.playText):v.pausePlay.removeClass(s+"play").addClass(s+"pause").html(v.vars.pauseText)}},touch:function(){var n,i,r,o,s,l,c=!1,t=0,a=0,d=0;if(y){g.style.msTouchAction="none",g._gesture=new MSGesture,(g._gesture.target=g).addEventListener("MSPointerDown",e,!1),g._slider=v,g.addEventListener("MSGestureChange",u,!1),g.addEventListener("MSGestureEnd",p,!1);var e=function(e){e.stopPropagation(),v.animating?e.preventDefault():(v.pause(),g._gesture.addPointer(e.pointerId),d=0,o=b?v.h:v.w,l=Number(new Date),r=S&&C&&v.animatingTo===v.last?0:S&&C?v.limit-(v.itemW+v.vars.itemMargin)*v.move*v.animatingTo:S&&v.currentSlide===v.last?v.limit:S?(v.itemW+v.vars.itemMargin)*v.move*v.currentSlide:C?(v.last-v.currentSlide+v.cloneOffset)*o:(v.currentSlide+v.cloneOffset)*o)},u=function(e){e.stopPropagation();var t=e.target._slider;if(t){var a=-e.translationX,n=-e.translationY;s=d+=b?n:a,c=b?Math.abs(d)<Math.abs(-a):Math.abs(d)<Math.abs(-n),e.detail===e.MSGESTURE_FLAG_INERTIA?setImmediate(function(){g._gesture.stop()}):(!c||500<Number(new Date)-l)&&(e.preventDefault(),!T&&t.transitions&&(t.vars.animationLoop||(s=d/(0===t.currentSlide&&d<0||t.currentSlide===t.last&&0<d?Math.abs(d)/o+2:1)),t.setProps(r+s,"setTouch")))}},p=function(e){if(e.stopPropagation(),e=e.target._slider){if(e.animatingTo===e.currentSlide&&!c&&null!==s){var t=C?-s:s,a=0<t?e.getTarget("next"):e.getTarget("prev");e.canAdvance(a)&&(Number(new Date)-l<550&&50<Math.abs(t)||Math.abs(t)>o/2)?e.flexAnimate(a,e.vars.pauseOnAction):T||e.flexAnimate(e.currentSlide,e.vars.pauseOnAction,!0)}r=s=i=n=null,d=0}}}else{g.addEventListener("touchstart",h,!1);var h=function(e){v.animating?e.preventDefault():!window.navigator.msPointerEnabled&&1!==e.touches.length||(v.pause(),o=b?v.h:v.w,l=Number(new Date),t=e.touches[0].pageX,a=e.touches[0].pageY,r=S&&C&&v.animatingTo===v.last?0:S&&C?v.limit-(v.itemW+v.vars.itemMargin)*v.move*v.animatingTo:S&&v.currentSlide===v.last?v.limit:S?(v.itemW+v.vars.itemMargin)*v.move*v.currentSlide:C?(v.last-v.currentSlide+v.cloneOffset)*o:(v.currentSlide+v.cloneOffset)*o,n=b?a:t,i=b?t:a,g.addEventListener("touchmove",f,!1),g.addEventListener("touchend",m,!1))},f=function(e){t=e.touches[0].pageX,a=e.touches[0].pageY,s=b?n-a:n-t,(!(c=b?Math.abs(s)<Math.abs(t-i):Math.abs(s)<Math.abs(a-i))||500<Number(new Date)-l)&&(e.preventDefault(),!T&&v.transitions&&(v.vars.animationLoop||(s/=0===v.currentSlide&&s<0||v.currentSlide===v.last&&0<s?Math.abs(s)/o+2:1),v.setProps(r+s,"setTouch")))},m=function(e){if(g.removeEventListener("touchmove",f,!1),v.animatingTo===v.currentSlide&&!c&&null!==s){var t=0<(e=C?-s:s)?v.getTarget("next"):v.getTarget("prev");v.canAdvance(t)&&(Number(new Date)-l<550&&50<Math.abs(e)||Math.abs(e)>o/2)?v.flexAnimate(t,v.vars.pauseOnAction):T||v.flexAnimate(v.currentSlide,v.vars.pauseOnAction,!0)}g.removeEventListener("touchend",m,!1),r=s=i=n=null}}},resize:function(){!v.animating&&v.is(":visible")&&(S||v.doMath(),T?d.smoothHeight():S?(v.slides.width(v.computedW),v.update(v.pagingCount),v.setProps()):b?(v.viewport.height(v.h),v.setProps(v.h,"setTotal")):(v.vars.smoothHeight&&d.smoothHeight(),v.newSlides.width(v.computedW),v.setProps(v.computedW,"setTotal")))},smoothHeight:function(e){if(!b||T){var t=T?v:v.viewport;e?t.animate({height:v.slides.eq(v.animatingTo).height()},e):t.height(v.slides.eq(v.animatingTo).height())}},sync:function(e){var t=u(v.vars.sync).data("flexslider"),a=v.animatingTo;switch(e){case"animate":t.flexAnimate(a,v.vars.pauseOnAction,!1,!0);break;case"play":t.playing||t.asNav||t.play();break;case"pause":t.pause()}},uniqueID:function(e){return e.find("[id]").each(function(){var e=u(this);e.attr("id",e.attr("id")+"_clone")}),e},pauseInvisible:{visProp:null,init:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)e[t]+"Hidden"in document&&(d.pauseInvisible.visProp=e[t]+"Hidden");d.pauseInvisible.visProp&&(e=d.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange",document.addEventListener(e,function(){d.pauseInvisible.isHidden()?v.startTimeout?clearTimeout(v.startTimeout):v.pause():v.started?v.play():0<v.vars.initDelay?setTimeout(v.play,v.vars.initDelay):v.play()}))},isHidden:function(){return document[d.pauseInvisible.visProp]||!1}},setToClearWatchedEvent:function(){clearTimeout(t),t=setTimeout(function(){i=""},3e3)}},v.flexAnimate=function(e,t,a,n,i){if(v.vars.animationLoop||e===v.currentSlide||(v.direction=e>v.currentSlide?"next":"prev"),c&&1===v.pagingCount&&(v.direction=v.currentItem<e?"next":"prev"),!v.animating&&(v.canAdvance(e,i)||a)&&v.is(":visible")){if(c&&n){if(a=u(v.vars.asNavFor).data("flexslider"),v.atEnd=0===e||e===v.count-1,a.flexAnimate(e,!0,!1,!0,i),v.direction=v.currentItem<e?"next":"prev",a.direction=v.direction,Math.ceil((e+1)/v.visible)-1===v.currentSlide||0===e)return v.currentItem=e,v.slides.removeClass(s+"active-slide").eq(e).addClass(s+"active-slide"),!1;v.currentItem=e,v.slides.removeClass(s+"active-slide").eq(e).addClass(s+"active-slide"),e=Math.floor(e/v.visible)}if(v.animating=!0,v.animatingTo=e,t&&v.pause(),v.vars.before(v),v.syncExists&&!i&&d.sync("animate"),v.vars.controlNav&&d.controlNav.active(),S||v.slides.removeClass(s+"active-slide").eq(e).addClass(s+"active-slide"),v.atEnd=0===e||e===v.last,v.vars.directionNav&&d.directionNav.update(),e===v.last&&(v.vars.end(v),v.vars.animationLoop||v.pause()),T)l?(v.slides.eq(v.currentSlide).css({opacity:0,zIndex:1}),v.slides.eq(e).css({opacity:1,zIndex:2}),v.wrapup(r)):(v.slides.eq(v.currentSlide).css({zIndex:1}).animate({opacity:0},v.vars.animationSpeed,v.vars.easing),v.slides.eq(e).css({zIndex:2}).animate({opacity:1},v.vars.animationSpeed,v.vars.easing,v.wrapup));else{var r=b?v.slides.filter(":first").height():v.computedW;e=S?(e=v.vars.itemMargin,(e=(v.itemW+e)*v.move*v.animatingTo)>v.limit&&1!==v.visible?v.limit:e):0===v.currentSlide&&e===v.count-1&&v.vars.animationLoop&&"next"!==v.direction?C?(v.count+v.cloneOffset)*r:0:v.currentSlide===v.last&&0===e&&v.vars.animationLoop&&"prev"!==v.direction?C?0:(v.count+1)*r:C?(v.count-1-e+v.cloneOffset)*r:(e+v.cloneOffset)*r,v.setProps(e,"",v.vars.animationSpeed),v.transitions?(v.vars.animationLoop&&v.atEnd||(v.animating=!1,v.currentSlide=v.animatingTo),o=!1,e=function(){o||v.wrapup(r),o=!0},v.container.unbind("webkitTransitionEnd transitionend"),v.container.bind("webkitTransitionEnd transitionend",e),setTimeout(e,v.vars.animationSpeed+200)):v.container.animate(v.args,v.vars.animationSpeed,v.vars.easing,function(){v.wrapup(r)})}v.vars.smoothHeight&&d.smoothHeight(v.vars.animationSpeed)}var o},v.wrapup=function(e){T||S||(0===v.currentSlide&&v.animatingTo===v.last&&v.vars.animationLoop?v.setProps(e,"jumpEnd"):v.currentSlide===v.last&&0===v.animatingTo&&v.vars.animationLoop&&v.setProps(e,"jumpStart")),v.animating=!1,v.currentSlide=v.animatingTo,v.vars.after(v)},v.animateSlides=function(){v.animating||v.flexAnimate(v.getTarget("next"))},v.pause=function(){clearInterval(v.animatedSlides),v.animatedSlides=null,v.playing=!1,v.vars.pausePlay&&d.pausePlay.update("play"),v.syncExists&&d.sync("pause")},v.play=function(){v.playing&&clearInterval(v.animatedSlides),v.animatedSlides=v.animatedSlides||setInterval(v.animateSlides,v.vars.slideshowSpeed),v.started=v.playing=!0,v.vars.pausePlay&&d.pausePlay.update("pause"),v.syncExists&&d.sync("play")},v.stop=function(){v.pause(),v.stopped=!0},v.canAdvance=function(e,t){var a=c?v.pagingCount-1:v.last;return!!t||(c&&v.currentItem===v.count-1&&0===e&&"prev"===v.direction||(!c||0!==v.currentItem||e!==v.pagingCount-1||"next"===v.direction)&&((e!==v.currentSlide||c)&&(!!v.vars.animationLoop||(!v.atEnd||0!==v.currentSlide||e!==a||"next"===v.direction)&&(!v.atEnd||v.currentSlide!==a||0!==e||"next"!==v.direction))))},v.getTarget=function(e){return"next"===(v.direction=e)?v.currentSlide===v.last?0:v.currentSlide+1:0===v.currentSlide?v.last:v.currentSlide-1},v.setProps=function(e,t,a){var n,i=(n=e||(v.itemW+v.vars.itemMargin)*v.move*v.animatingTo,-1*function(){if(S)return"setTouch"===t?e:C&&v.animatingTo===v.last?0:C?v.limit-(v.itemW+v.vars.itemMargin)*v.move*v.animatingTo:v.animatingTo===v.last?v.limit:n;switch(t){case"setTotal":return C?(v.count-1-v.currentSlide+v.cloneOffset)*e:(v.currentSlide+v.cloneOffset)*e;case"setTouch":return e;case"jumpEnd":return C?e:v.count*e;case"jumpStart":return C?v.count*e:e;default:return e}}()+"px");v.transitions&&(i=b?"translate3d(0,"+i+",0)":"translate3d("+i+",0,0)",a=void 0!==a?a/1e3+"s":"0s",v.container.css("-"+v.pfx+"-transition-duration",a),v.container.css("transition-duration",a)),v.args[v.prop]=i,!v.transitions&&void 0!==a||v.container.css(v.args),v.container.css("transform",i)},v.setup=function(e){var t,a;T?(v.slides.css({width:"100%",float:"left",marginRight:"-100%",position:"relative"}),"init"===e&&(l?v.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+v.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(v.currentSlide).css({opacity:1,zIndex:2}):v.slides.css({opacity:0,display:"block",zIndex:1}).eq(v.currentSlide).css({zIndex:2}).animate({opacity:1},v.vars.animationSpeed,v.vars.easing)),v.vars.smoothHeight&&d.smoothHeight()):("init"===e&&(v.viewport=u('<div class="'+s+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(v).append(v.container),v.cloneCount=0,v.cloneOffset=0,C&&(a=u.makeArray(v.slides).reverse(),v.slides=u(a),v.container.empty().append(v.slides))),v.vars.animationLoop&&!S&&(v.cloneCount=2,v.cloneOffset=1,"init"!==e&&v.container.find(".clone").remove(),d.uniqueID(v.slides.first().clone().addClass("clone").attr("aria-hidden","true")).appendTo(v.container),d.uniqueID(v.slides.last().clone().addClass("clone").attr("aria-hidden","true")).prependTo(v.container)),v.newSlides=u(v.vars.selector,v),t=C?v.count-1-v.currentSlide+v.cloneOffset:v.currentSlide+v.cloneOffset,b&&!S?(v.container.height(200*(v.count+v.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){v.newSlides.css({display:"block"}),v.doMath(),v.viewport.height(v.h),v.setProps(t*v.h,"init")},"init"===e?100:0)):(v.container.width(200*(v.count+v.cloneCount)+"%"),v.setProps(t*v.computedW,"init"),setTimeout(function(){v.doMath(),v.newSlides.css({width:v.computedW,float:"left",display:"block"}),v.vars.smoothHeight&&d.smoothHeight()},"init"===e?100:0)));S||v.slides.removeClass(s+"active-slide").eq(v.currentSlide).addClass(s+"active-slide"),v.vars.init(v)},v.doMath=function(){var e=v.slides.first(),t=v.vars.itemMargin,a=v.vars.minItems,n=v.vars.maxItems;v.w=void 0===v.viewport?v.width():v.viewport.width(),v.h=e.height(),v.boxPadding=e.outerWidth()-e.width(),S?(v.itemT=v.vars.itemWidth+t,v.minW=a?a*v.itemT:v.w,v.maxW=n?n*v.itemT-t:v.w,v.itemW=v.minW>v.w?(v.w-t*(a-1))/a:v.maxW<v.w?(v.w-t*(n-1))/n:v.vars.itemWidth>v.w?v.w:v.vars.itemWidth,v.visible=Math.floor(v.w/v.itemW),v.move=0<v.vars.move&&v.vars.move<v.visible?v.vars.move:v.visible,v.pagingCount=Math.ceil((v.count-v.visible)/v.move+1),v.last=v.pagingCount-1,v.limit=1===v.pagingCount?0:v.vars.itemWidth>v.w?v.itemW*(v.count-1)+t*(v.count-1):(v.itemW+t)*v.count-v.w-t):(v.itemW=v.w,v.pagingCount=v.count,v.last=v.count-1),v.computedW=v.itemW-v.boxPadding},v.update=function(e,t){v.doMath(),S||(e<v.currentSlide?v.currentSlide+=1:e<=v.currentSlide&&0!==e&&(v.currentSlide-=1),v.animatingTo=v.currentSlide),v.vars.controlNav&&!v.manualControls&&("add"===t&&!S||v.pagingCount>v.controlNav.length?d.controlNav.update("add"):("remove"===t&&!S||v.pagingCount<v.controlNav.length)&&(S&&v.currentSlide>v.last&&(v.currentSlide-=1,v.animatingTo-=1),d.controlNav.update("remove",v.last))),v.vars.directionNav&&d.directionNav.update()},v.addSlide=function(e,t){var a=u(e);v.count+=1,v.last=v.count-1,b&&C?void 0!==t?v.slides.eq(v.count-t).after(a):v.container.prepend(a):void 0!==t?v.slides.eq(t).before(a):v.container.append(a),v.update(t,"add"),v.slides=u(v.vars.selector+":not(.clone)",v),v.setup(),v.vars.added(v)},v.removeSlide=function(e){var t=isNaN(e)?v.slides.index(u(e)):e;v.count-=1,v.last=v.count-1,isNaN(e)?u(e,v.slides).remove():b&&C?v.slides.eq(v.last).remove():v.slides.eq(e).remove(),v.doMath(),v.update(t,"remove"),v.slides=u(v.vars.selector+":not(.clone)",v),v.setup(),v.vars.removed(v)},d.init()},u(window).blur(function(e){focused=!1}).focus(function(e){focused=!0}),u.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},u.fn.flexslider=function(a){if(void 0===a&&(a={}),"object"==typeof a)return this.each(function(){var e=u(this),t=e.find(a.selector?a.selector:".slides > li");1===t.length&&!0===a.allowOneSlide||0===t.length?(t.fadeIn(400),a.start&&a.start(e)):void 0===e.data("flexslider")&&new u.flexslider(this,a)});var e=u(this).data("flexslider");switch(a){case"play":e.play();break;case"pause":e.pause();break;case"stop":e.stop();break;case"next":e.flexAnimate(e.getTarget("next"),!0);break;case"prev":case"previous":e.flexAnimate(e.getTarget("prev"),!0);break;default:"number"==typeof a&&e.flexAnimate(a,!0)}}}(jQuery),function(i){i.extend(i.expr[":"],{containsi:function(e,t,a){return 0<=i(e).text().toLowerCase().indexOf((a[3]||"").toLowerCase())}});function r(e){this.callbacks={},e(this)}r.prototype.all=function(e){this.callbacks.all=e},r.prototype.reset=function(e){this.callbacks.reset=e},r.prototype.empty=function(e){this.callbacks.empty=e},r.prototype.results=function(e){this.callbacks.results=e},i.fn.search=function(t,e){function a(){if(result=function(e){try{if(val=this.val())return i(e).filter(function(e,t){return!!i(t).text().match(RegExp(val.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"gi"))})}catch(e){alert(e)}return!1}.call(i(this),t)){n.all&&n.all.call(this,result);var e=0<result.size()?"results":"empty";return n[e]&&n[e].call(this,result)}return n.all&&n.all.call(this,i(t)),n.reset&&n.reset.call(this)}var n=new r(e).callbacks;i(this).on("keypress",a),i(this).on("keydown",a),i(this).on("keyup",a),i(this).on("blur",a)}}(jQuery),function(e){var C=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],T=["January","February","March","April","May","June","July","August","September","October","November","December"],t=[];function w(e){return t[e]||e}function A(e){var t=e,a="";if(-1!==t.indexOf(".")){var n=t.split(".");t=n[0],a=n[1]}var i=t.split(":");return 3===i.length?(hour=i[0],minute=i[1],second=i[2],{time:t,hour:hour,minute:minute,second:second,millis:a}):{time:"",hour:"",minute:"",second:"",millis:""}}t.Jan="01",t.Feb="02",t.Mar="03",t.Apr="04",t.May="05",t.Jun="06",t.Jul="07",t.Aug="08",t.Sep="09",t.Oct="10",t.Nov="11",t.Dec="12",e.format={date:function(t,e){try{var a=null,n=null,i=null,r=null,o=null;if("number"==typeof t)return this.date(new Date(t),e);if("function"==typeof t.getFullYear)a=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),r=t.getDay(),o=A(t.toTimeString());else if(-1!=t.search(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}[-+]?\d{2}:?\d{2}/))a=(s=t.split(/[T\+-]/))[0],n=s[1],i=s[2],o=A(s[3].split(".")[0]),r=new Date(a,n-1,i).getDay();else{var s;switch((s=t.split(" ")).length){case 6:a=s[5],n=w(s[1]),i=s[2],o=A(s[3]),r=new Date(a,n-1,i).getDay();break;case 2:a=(l=s[0].split("-"))[0],n=l[1],i=l[2],o=A(s[1]),r=new Date(a,n-1,i).getDay();break;case 7:case 9:case 10:a=s[3],n=w(s[1]),i=s[2],o=A(s[4]),r=new Date(a,n-1,i).getDay();break;case 1:var l;a=(l=s[0].split(""))[0]+l[1]+l[2]+l[3],n=l[5]+l[6],i=l[8]+l[9],o=A(l[13]+l[14]+l[15]+l[16]+l[17]+l[18]+l[19]+l[20]),r=new Date(a,n-1,i).getDay();break;default:return t}}for(var c="",d="",u="",p=0;p<e.length;p++){var h=e.charAt(p);switch(u="",c+=h){case"ddd":d+=(b=r,C[parseInt(b,10)]||b),c="";break;case"dd":if("d"==e.charAt(p+1))break;1===String(i).length&&(i="0"+i),d+=i,c="";break;case"d":if("d"==e.charAt(p+1))break;d+=parseInt(i,10),c="";break;case"MMMM":d+=(v=n,y=parseInt(v,10)-1,T[y]||v),c="";break;case"MMM":if("M"===e.charAt(p+1))break;d+=(m=n,g=parseInt(m,10)-1,S[g]||m),c="";break;case"MM":if("M"==e.charAt(p+1))break;1===String(n).length&&(n="0"+n),d+=n,c="";break;case"M":if("M"==e.charAt(p+1))break;d+=parseInt(n,10),c="";break;case"yyyy":d+=a,c="";break;case"yy":if("y"==e.charAt(p+1)&&"y"==e.charAt(p+2))break;d+=String(a).slice(-2),c="";break;case"HH":d+=o.hour,c="";break;case"hh":var f=0==o.hour?12:o.hour<13?o.hour:o.hour-12;d+=f=1==String(f).length?"0"+f:f,c="";break;case"h":if("h"==e.charAt(p+1))break;f=0==o.hour?12:o.hour<13?o.hour:o.hour-12,d+=parseInt(f,10),c="";break;case"mm":d+=o.minute,c="";break;case"ss":d+=o.second.substring(0,2),c="";break;case"SSS":d+=o.millis.substring(0,3),c="";break;case"a":d+=12<=o.hour?"PM":"AM",c="";break;case" ":case"/":case":":d+=h,c="";break;default:2===c.length&&0!==c.indexOf("y")&&"SS"!=c?(d+=c.substring(0,1),c=c.substring(1,2)):3===c.length&&-1===c.indexOf("yyy")?c="":u=c}}return d+=u}catch(e){return console.log(e),t}var m,g,v,y,b}}}(jQuery),jQuery.format.date.defaultShortDateFormat="dd/MM/yyyy",jQuery.format.date.defaultLongDateFormat="dd/MM/yyyy hh:mm:ss",jQuery(document).ready(function(){jQuery(".shortDateFormat").each(function(e,t){jQuery(t).is(":input")?jQuery(t).val(jQuery.format.date(jQuery(t).val(),jQuery.format.date.defaultShortDateFormat)):jQuery(t).text(jQuery.format.date(jQuery(t).text(),jQuery.format.date.defaultShortDateFormat))}),jQuery(".longDateFormat").each(function(e,t){jQuery(t).is(":input")?jQuery(t).val(jQuery.format.date(jQuery(t).val(),jQuery.format.date.defaultLongDateFormat)):jQuery(t).text(jQuery.format.date(jQuery(t).text(),jQuery.format.date.defaultLongDateFormat))})}),function(o){"use strict";function i(e,t){this.init(e,t)}i.prototype={constructor:i,init:function(e,t){if(this.$element=o(e),this.options=o.extend({},o.fn.modalmanager.defaults,this.$element.data(),"object"==typeof t&&t),this.stack=[],this.backdropCount=0,this.options.resize){var a,n=this;o(window).on("resize.modal",function(){a&&clearTimeout(a),a=setTimeout(function(){for(var e=0;e<n.stack.length;e++)n.stack[e].isShown&&n.stack[e].layout()},10)})}},createModal:function(e,t){o(e).modal(o.extend({manager:this},t))},appendModal:function(a){this.stack.push(a);var n=this;a.$element.on("show.modalmanager",c(function(e){function t(){a.isShown=!0;var t=o.support.transition&&a.$element.hasClass("fade");n.$element.toggleClass("modal-open",n.hasOpenModal()).toggleClass("page-overflow",o(window).height()<n.$element.height()),a.$parent=a.$element.parent(),a.$container=n.createContainer(a),a.$element.appendTo(a.$container),n.backdrop(a,function(){a.$element.show(),t&&a.$element[0].offsetWidth,a.layout(),a.$element.addClass("in").attr("aria-hidden",!1);function e(){n.setFocus(),a.$element.trigger("shown")}t?a.$element.one(o.support.transition.end,e):e()})}a.options.replace?n.replace(t):t()})),a.$element.on("hidden.modalmanager",c(function(e){if(n.backdrop(a),a.$element.parent().length)if(a.$backdrop){o.support.transition&&a.$element.hasClass("fade")&&a.$element[0].offsetWidth,o.support.transition&&a.$element.hasClass("fade")?a.$backdrop.one(o.support.transition.end,function(){a.destroy()}):a.destroy()}else a.destroy();else n.destroyModal(a)})),a.$element.on("destroyed.modalmanager",c(function(e){n.destroyModal(a)}))},getOpenModals:function(){for(var e=[],t=0;t<this.stack.length;t++)this.stack[t].isShown&&e.push(this.stack[t]);return e},hasOpenModal:function(){return 0<this.getOpenModals().length},setFocus:function(){for(var e,t=0;t<this.stack.length;t++)this.stack[t].isShown&&(e=this.stack[t]);e&&e.focus()},destroyModal:function(e){e.$element.off(".modalmanager"),e.$backdrop&&this.removeBackdrop(e),this.stack.splice(this.getIndexOfModal(e),1);var t=this.hasOpenModal();this.$element.toggleClass("modal-open",t),t||this.$element.removeClass("page-overflow"),this.removeContainer(e),this.setFocus()},getModalAt:function(e){return this.stack[e]},getIndexOfModal:function(e){for(var t=0;t<this.stack.length;t++)if(e===this.stack[t])return t},replace:function(e){for(var t,a=0;a<this.stack.length;a++)this.stack[a].isShown&&(t=this.stack[a]);t?(this.$backdropHandle=t.$backdrop,t.$backdrop=null,e&&t.$element.one("hidden",c(o.proxy(e,this))),t.hide()):e&&e()},removeBackdrop:function(e){e.$backdrop.remove(),e.$backdrop=null},createBackdrop:function(e,t){var a;return this.$backdropHandle?((a=this.$backdropHandle).off(".modalmanager"),this.$backdropHandle=null,this.isLoading&&this.removeSpinner()):a=o(t).addClass(e).appendTo(this.$element),a},removeContainer:function(e){e.$container.remove(),e.$container=null},createContainer:function(t){var e;return e=o('<div class="modal-scrollable">').css("z-index",l("modal",this.getOpenModals().length)).appendTo(this.$element),t&&"static"!=t.options.backdrop?e.on("click.modal",c(function(e){t.hide()})):t&&e.on("click.modal",c(function(e){t.attention()})),e},backdrop:function(e,t){var a=e.$element.hasClass("fade")?"fade":"",n=e.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(e.isShown&&n){var i=o.support.transition&&a&&!this.$backdropHandle;e.$backdrop=this.createBackdrop(a,e.options.backdropTemplate),e.$backdrop.css("z-index",l("backdrop",this.getOpenModals().length)),i&&e.$backdrop[0].offsetWidth,e.$backdrop.addClass("in"),this.backdropCount+=1,i?e.$backdrop.one(o.support.transition.end,t):t()}else if(!e.isShown&&e.$backdrop){e.$backdrop.removeClass("in"),this.backdropCount-=1;var r=this;o.support.transition&&e.$element.hasClass("fade")?e.$backdrop.one(o.support.transition.end,function(){r.removeBackdrop(e)}):r.removeBackdrop(e)}else t&&t()},removeSpinner:function(){this.$spinner&&this.$spinner.remove(),this.$spinner=null,this.isLoading=!1},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove(),this.$backdropHandle=null,this.removeSpinner()},loading:function(e){if(e=e||function(){},this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",o(window).height()<this.$element.height()),this.isLoading)if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var t=this;o.support.transition?this.$backdropHandle.one(o.support.transition.end,function(){t.removeLoading()}):t.removeLoading()}else e&&e(this.isLoading);else{this.$backdropHandle=this.createBackdrop("fade",this.options.backdropTemplate),this.$backdropHandle[0].offsetWidth;var a=this.getOpenModals();this.$backdropHandle.css("z-index",l("backdrop",a.length+1)).addClass("in");var n=o(this.options.spinner).css("z-index",l("modal",a.length+1)).appendTo(this.$element).addClass("in");this.$spinner=o(this.createContainer()).append(n).on("click.modalmanager",o.proxy(this.loading,this)),this.isLoading=!0,o.support.transition?this.$backdropHandle.one(o.support.transition.end,e):e()}}};var r,s,l=(s={},function(e,t){if(void 0===r){var a=o('<div class="modal hide" />').appendTo("body"),n=o('<div class="modal-backdrop hide" />').appendTo("body");s.modal=+a.css("z-index"),s.backdrop=+n.css("z-index"),r=s.modal-s.backdrop,a.remove(),n.remove(),n=a=null}return s[e]+r*t});function c(t){return function(e){if(e&&this===e.target)return t.apply(this,arguments)}}o.fn.modalmanager=function(a,n){return this.each(function(){var e=o(this),t=e.data("modalmanager");t||e.data("modalmanager",t=new i(this,a)),"string"==typeof a&&t[a].apply(t,[].concat(n))})},o.fn.modalmanager.defaults={backdropLimit:999,resize:!0,spinner:'<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},o.fn.modalmanager.Constructor=i,o(function(){o(document).off("show.bs.modal").off("hidden.bs.modal")})}(jQuery),function(r){"use strict";function o(e,t){this.init(e,t)}o.prototype={constructor:o,init:function(e,t){var a=this;this.options=t,this.$element=r(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",r.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote,function(){var e=r.Event("loaded");a.$element.trigger(e)});var n="function"==typeof this.options.manager?this.options.manager.call(this):this.options.manager;(n=n.appendModal?n:r(n).modalmanager().data("modalmanager")).appendModal(this)},toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var e=r.Event("show");this.isShown||(this.$element.trigger(e),e.isDefaultPrevented()||(this.escape(),this.tab(),this.options.loading&&this.loading()))},hide:function(e){e&&e.preventDefault(),e=r.Event("hide"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.tab(),this.isLoading&&this.loading(),r(document).off("focusin.modal"),this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",!0),r.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},layout:function(){var e=this.options.height?"height":"max-height",t=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var a=this;this.$element.css("margin-left",function(){return/%/gi.test(a.options.width)?-parseInt(a.options.width)/2+"%":-r(this).width()/2+"px"})}else this.$element.css("width",""),this.$element.css("margin-left","");this.$element.find(".modal-body").css("overflow","").css(e,""),t&&this.$element.find(".modal-body").css("overflow","auto").css(e,t),r(window).height()-10<this.$element.height()||this.options.modalOverflow?this.$element.css("margin-top",0).addClass("modal-overflow"):this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")},tab:function(){var i=this;this.isShown&&this.options.consumeTab?this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(e){if(e.keyCode&&9==e.keyCode){var t=[],a=Number(r(this).data("tabindex"));i.$element.find("[data-tabindex]:enabled:visible:not([readonly])").each(function(e){t.push(Number(r(this).data("tabindex")))}),t.sort(function(e,t){return e-t});var n=r.inArray(a,t);e.shiftKey?0==n?i.$element.find("[data-tabindex="+t[t.length-1]+"]").focus():i.$element.find("[data-tabindex="+t[n-1]+"]").focus():n<t.length-1?i.$element.find("[data-tabindex="+t[n+1]+"]").focus():i.$element.find("[data-tabindex="+t[0]+"]").focus(),e.preventDefault()}}):this.isShown||this.$element.off("keydown.tabindex.modal")},escape:function(){var t=this;this.isShown&&this.options.keyboard?(this.$element.attr("tabindex")||this.$element.attr("tabindex",-1),this.$element.on("keyup.dismiss.modal",function(e){27==e.which&&t.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var e=this,t=setTimeout(function(){e.$element.off(r.support.transition.end),e.hideModal()},500);this.$element.one(r.support.transition.end,function(){clearTimeout(t),e.hideModal()})},hideModal:function(){var e=this.options.height?"height":"max-height";(this.options.height||this.options.maxHeight)&&this.$element.find(".modal-body").css("overflow","").css(e,""),this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove(),this.$loading=null,this.isLoading=!1},loading:function(e){e=e||function(){};var t=this.$element.hasClass("fade")?"fade":"";if(this.isLoading)if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var a=this;r.support.transition&&this.$element.hasClass("fade")?this.$loading.one(r.support.transition.end,function(){a.removeLoading()}):a.removeLoading()}else e&&e(this.isLoading);else{var n=r.support.transition&&t;this.$loading=r('<div class="loading-mask '+t+'">').append(this.options.spinner).appendTo(this.$element),n&&this.$loading[0].offsetWidth,this.$loading.addClass("in"),this.isLoading=!0,n?this.$loading.one(r.support.transition.end,e):e()}},focus:function(){var e=this.$element.find(this.options.focusOn);(e=e.length?e:this.$element).focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var e=this;setTimeout(function(){e.$element.addClass("animated").addClass(e.options.attentionAnimation)},0)}this.focus()},destroy:function(){var e=r.Event("destroy");this.$element.trigger(e),e.isDefaultPrevented()||(this.$element.off(".modal").removeData("modal").removeClass("in").attr("aria-hidden",!0),this.$parent!==this.$element.parent()?this.$element.appendTo(this.$parent):this.$parent.length||(this.$element.remove(),this.$element=null),this.$element.trigger("destroyed"))}},r.fn.modal=function(n,i){return this.each(function(){var e=r(this),t=e.data("modal"),a=r.extend({},r.fn.modal.defaults,e.data(),"object"==typeof n&&n);t||e.data("modal",t=new o(this,a)),"string"==typeof n?t[n].apply(t,[].concat(i)):a.show&&t.show()})},r.fn.modal.defaults={keyboard:!0,backdrop:!0,loading:!1,show:!0,width:null,height:null,maxHeight:null,modalOverflow:!1,consumeTab:!0,focusOn:null,replace:!1,resize:!1,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},r.fn.modal.Constructor=o,r(function(){r(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(e){var t=r(this),a=t.attr("href"),n=r(t.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),i=n.data("modal")?"toggle":r.extend({remote:!/#/.test(a)&&a},n.data(),t.data());e.preventDefault(),n.modal(i).one("hide",function(){t.focus()})})})}(window.jQuery),function(e){if("function"==typeof define&&define.amd){if("undefined"!=typeof requirejs){var t="[history"+(new Date).getTime()+"]",a=requirejs.onError;e.toString=function(){return t},requirejs.onError=function(e){-1===e.message.indexOf(t)&&a.call(requirejs,e)}}define([],e)}if("object"!=typeof exports||"undefined"==typeof module)return e();module.exports=e()}(function(){var u=!0,p=null,h=!1;function i(e,t){var a=y.history!==w;a&&(y.history=w),e.apply(w,t),a&&(y.history=A)}function f(){}function s(e,t,a){if(e==p||""===e||t)e=t?e:T.href,L&&!a||(e=e.replace(/^[^#]*/,"")||"#",e=T.protocol.replace(/:.*$|$/,":")+"//"+T.host+F.basepath+e.replace(RegExp("^#[/]?(?:"+F.type+")?"),""));else{t=s();var n=b.getElementsByTagName("base")[0];!a&&n&&n.getAttribute("href")&&(n.href=n.href,t=s(n.href,p,u)),a=t.d,n=t.h,e=/^(?:\w+\:)?\/\//.test(e=""+e)?0===e.indexOf("/")?n+e:e:n+"//"+t.g+(0===e.indexOf("/")?e:0===e.indexOf("?")?a+e:0===e.indexOf("#")?a+t.e+e:a.replace(/[^\/]+$/g,"")+e)}j.href=e;t=(e=/(?:([a-zA-Z0-9\-]+\:))?(?:\/\/(?:[^@]*@)?([^\/:\?#]+)(?::([0-9]+))?)?([^\?#]*)(?:(\?[^#]+)|\?)?(?:(#.*))?/.exec(j.href))[2]+(e[3]?":"+e[3]:""),a=e[4]||"/",n=e[5]||"";var i="#"===e[6]?"":e[6]||"",r=a+n+i,o=a.replace(RegExp("^"+F.basepath,"i"),F.type)+n;return{b:e[1]+"//"+t+r,h:e[1],g:t,i:e[2],k:e[3]||"",d:a,e:n,a:i,c:r,j:o,f:o+i}}function o(t,a,n,e){var i=0;n||(n={set:f},i=1);var r=!n.set,o=!n.get,s={configurable:u,set:function(){r=1},get:function(){o=1}};try{D(t,a,s),t[a]=t[a],D(t,a,n)}catch(e){}if(!(r&&o||(t.__defineGetter__&&(t.__defineGetter__(a,s.get),t.__defineSetter__(a,s.set),t[a]=t[a],n.get&&t.__defineGetter__(a,n.get),n.set&&t.__defineSetter__(a,n.set)),r&&o))){if(i)return h;if(t===y){try{var l=t[a];t[a]=p}catch(e){}if("execScript"in y)y.execScript("Public "+a,"VBScript"),y.execScript("var "+a+";","JavaScript");else try{D(t,a,{value:f})}catch(e){"onpopstate"===a&&(P("popstate",n=function(){_("popstate",n,h);var e=t.onpopstate;t.onpopstate=p,setTimeout(function(){t.onpopstate=e},1)},h),z=0)}t[a]=l}else try{try{var c=C.create(t);for(var d in D(C.getPrototypeOf(c)===t?c:t,a,n),t)"function"==typeof t[d]&&(c[d]=t[d].bind(t));try{e.call(c,c,t)}catch(e){}t=c}catch(e){D(t.constructor.prototype,a,n)}}catch(e){return h}}return t}function r(t,a,e){return t=t===K?T:t,(e=e||{}).set=e.set||function(e){t[a]=e},e.get=e.get||function(){return t[a]},e}function n(e,t){var a=(""+("string"==typeof e?e:e.type)).replace(/^on/,""),n=q[a];if(n){if((t="string"==typeof e?t:e).target==p)for(var i=["target","currentTarget","srcElement","type"];e=i.pop();)t=o(t,e,{get:"type"===e?function(){return a}:function(){return y}});z&&(("popstate"===a?y.onpopstate:y.onhashchange)||f).call(y,t);i=0;for(var r=n.length;i<r;i++)n[i].call(y,t);return u}return R(e,t)}function l(){var e=b.createEvent?b.createEvent("Event"):b.createEventObject();e.initEvent?e.initEvent("popstate",h,h):e.type="popstate",e.state=A.state,n(e)}function c(e,t,a,n){L?G=T.href:(0===W&&(W=2),(t=s(t,2===W&&-1!==(""+t).indexOf("#"))).c!==s().c&&(G=n,a?T.replace("#"+t.f):T.hash=t.f)),!x&&e&&(B[T.href]=e),V=h}function d(e){var t=G;if(G=T.href,t){H!==T.href&&l();e=e||y.event,t=s(t,u);var a=s();e.oldURL||(e.oldURL=t.b,e.newURL=a.b),t.a!==a.a&&n(e)}}function m(e){setTimeout(function(){P("popstate",function(e){H=T.href,x||(e=o(e,"state",{get:function(){return A.state}})),n(e)},h)},0),!L&&e!==u&&"location"in A&&(v(O.hash),V&&(V=h,l()))}function g(e){var t;e:{for(t=(e=e||y.event).target||e.srcElement;t;){if("A"===t.nodeName)break e;t=t.parentNode}t=void 0}var a="defaultPrevented"in e?e.defaultPrevented:e.returnValue===h;t&&"A"===t.nodeName&&!a&&(a=s(),t=s(t.getAttribute("href",2)),a.b.split("#").shift()===t.b.split("#").shift()&&t.a&&(a.a!==t.a&&(O.hash=t.a),v(t.a),e.preventDefault?e.preventDefault():e.returnValue=h))}function v(e){var t=b.getElementById(e=(e||"").replace(/^#/,""));t&&t.id===e&&"A"===t.nodeName&&(e=t.getBoundingClientRect(),y.scrollTo(a.scrollLeft||0,e.top+(a.scrollTop||0)-(a.clientTop||0)))}var y=("object"==typeof window?window:this)||{};if(!y.history||"emulate"in y.history)return y.history;var t,e,b=y.document,a=b.documentElement,C=y.Object,S=y.JSON,T=y.location,w=y.history,A=w,E=w.pushState,I=w.replaceState,L=-1===(e=y.navigator.userAgent).indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone")?!!E:h,x="state"in w,D=C.defineProperty,O=o({},"t")?{}:b.createElement("a"),U="",N=y.addEventListener?"addEventListener":(U="on")&&"attachEvent",M=y.removeEventListener?"removeEventListener":"detachEvent",k=y.dispatchEvent?"dispatchEvent":"fireEvent",P=y[N],_=y[M],R=y[k],F={basepath:"/",redirect:0,type:"/",init:0},$="__historyAPI__",j=b.createElement("a"),G=T.href,H="",z=1,V=h,W=0,B={},q={},Q=b.title,J={onhashchange:p,onpopstate:p},Y={setup:function(e,t,a){F.basepath=(""+(e==p?F.basepath:e)).replace(/(?:^|\/)[^\/]*$/,"/"),F.type=t==p?F.type:t,F.redirect=a==p?F.redirect:!!a},redirect:function(e,t){if(A.setup(t,e),t=F.basepath,y.top==y.self){var a=s(p,h,u).c,n=T.pathname+T.search;L?(n=n.replace(/([^\/])$/,"$1/"),a!=t&&RegExp("^"+t+"$","i").test(n)&&T.replace(a)):n!=t&&(n=n.replace(/([^\/])\?/,"$1/?"),RegExp("^"+t,"i").test(n)&&T.replace(t+"#"+n.replace(RegExp("^"+t,"i"),F.type)+T.hash))}},pushState:function(e,t,a){var n=b.title;Q!=p&&(b.title=Q),E&&i(E,arguments),c(e,a),b.title=n,Q=t},replaceState:function(e,t,a){var n=b.title;Q!=p&&(b.title=Q),delete B[T.href],I&&i(I,arguments),c(e,a,u),b.title=n,Q=t},location:{set:function(e){0===W&&(W=1),y.location=e},get:function(){return 0===W&&(W=1),O}},state:{get:function(){return"object"==typeof B[T.href]?S.parse(S.stringify(B[T.href])):void 0!==B[T.href]?B[T.href]:p}}},K={assign:function(e){L||0!==(""+e).indexOf("#")?T.assign(e):c(p,e)},reload:function(e){T.reload(e)},replace:function(e){L||0!==(""+e).indexOf("#")?T.replace(e):c(p,e,u)},toString:function(){return this.href},origin:{get:function(){return void 0!==t?t:T.origin?T.origin:T.protocol+"//"+T.hostname+(T.port?":"+T.port:"")},set:function(e){t=e}},href:L?p:{get:function(){return s().b}},protocol:p,host:p,hostname:p,port:p,pathname:L?p:{get:function(){return s().d}},search:L?p:{get:function(){return s().e}},hash:L?p:{set:function(e){c(p,(""+e).replace(/^(#|)/,"#"),h,G)},get:function(){return s().a}}};return function(){var e;(-1!==(e=((e=b.getElementsByTagName("script"))[e.length-1]||{}).src||"").indexOf("?")?e.split("?").pop():"").replace(/(\w+)(?:=([^&]*))?/g,function(e,t,a){F[t]=(a||"").replace(/^(0|false)$/,"")}),P(U+"hashchange",d,h);var a=[K,O,J,y,Y,A];x&&delete Y.state;for(var n=0;n<a.length;n+=2)for(var t in a[n])if(a[n].hasOwnProperty(t))if("object"!=typeof a[n][t])a[n+1][t]=a[n][t];else{if(e=r(a[n],t,a[n][t]),!o(a[n+1],t,e,function(e,t){t===A&&(y.history=A=a[n+1]=e)}))return _(U+"hashchange",d,h),h;a[n+1]===y&&(q[t]=q[t.substr(2)]=[])}return A.setup(),F.redirect&&A.redirect(),F.init&&(W=1),!x&&S&&function(){var t;try{(t=y.sessionStorage).setItem($+"t","1"),t.removeItem($+"t")}catch(e){t={getItem:function(e){return 1<(e=b.cookie.split(e+"=")).length&&e.pop().split(";").shift()||"null"},setItem:function(e){var t={};(t[T.href]=A.state)&&(b.cookie=e+"="+S.stringify(t))}}}try{B=S.parse(t.getItem($))||{}}catch(e){B={}}P(U+"unload",function(){t.setItem($,S.stringify(B))},h)}(),L||b[N](U+"click",g,h),"complete"===b.readyState?m(u):(L||s().c===F.basepath||(V=u),P(U+"load",m,h)),u}()?(A.emulate=!L,y[N]=function(e,t,a){e in q?q[e].push(t):3<arguments.length?P(e,t,a,arguments[3]):P(e,t,a)},y[M]=function(e,t,a){var n=q[e];if(n){for(e=n.length;e--;)if(n[e]===t){n.splice(e,1);break}}else _(e,t,a)},y[k]=n,A):void 0});var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.Utilities=UAlberta.Sitecore.Utilities||function(n){"use strict";var i,t={Mobile:"mobile",Tablet:"tablet",Desktop:"desktop",Highres:"high-resolution"},r={Unix:"yyyy-MM-dd HH:mm:ss",UnixDateOnly:"yyyy-MM-dd",Long:"MMMM d, yyyy h:mm a",LongNoYear:"MMMM d h:mm a",Short:"MMMM d, yyyy",ShortNoYear:"MMMM d",TimeOnly:"h:mm a",Timestamp:"timestamp"},e=(i={},function(e,t,a){i[a]&&clearTimeout(i[a]),i[a]=setTimeout(e,t)});return{WindowType:t,DateFormat:r,Delay:e,GetWindowType:function(){var e=n(window).width();return e<690?t.Mobile:e<980?t.Tablet:e<1200?t.Desktop:t.Highres},GetDateFromJson:function(e,t){if(null==e||null==t)return"";var a=new Date(parseInt(e.substr(6))).getTime();return t==r.Timestamp?a:n.format.date(a,t)},MultiselectButtonText:function(e,t){if(0==e.length)return UAlberta.Sitecore.Localization.SHOW_ALL+' <b class="caret"></b>';if(2<e.length)return e.length+" "+UAlberta.Sitecore.Localization.SELECTED+' <b class="caret"></b>';var a="";return e.each(function(){a+=n(this).text()+", "}),a.substr(0,a.length-2)+' <b class="caret"></b>'}}}(jQuery);var UAlberta=UAlberta||{};UAlberta.InputPlaceholders=function(t){var a="placeholder"in document.createElement("input")&&"placeholder"in document.createElement("textarea"),n="placeholder";function i(){var e=t(this);e.val()==e.attr("placeholder")&&(e.val(""),e.removeClass(n))}function r(){var e=t(this);""==e.val()||e.val()==e.attr("placeholder")?(e.addClass(n),e.val(e.attr("placeholder"))):e.removeClass(n)}return{initialize:function(e){a||(e&&(n=e),t("input[placeholder], textarea[placeholder]").bind({focus:i,blur:r}).trigger("blur"),t(".search-query").keydown(function(e){13!=(e=e||window.event).keyCode&&13!=e.which||t("."+n).each(i)}),t(".global-search-btn").click(function(){t("."+n).each(i)}),t(document).delegate("form","submit",function(){t("."+n).each(i)}),t(window).bind("beforeunload",function(){t("."+n).each(i)}))}}}(jQuery);var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.GlobalSearch=function(a){function o(e,t){this.key=e,this.value=t}function n(e){var t=jQuery(e.selector).val();if(""==t)return!1;e.query=escape(t);var a=[];a.push(new o("cx",e.googleId)),a.push(new o("q",e.query)),a.push(new o("cof","FORID%3A11#1150")),a.push(new o("searchcat","blade"));var n=e.resultUrl;for(var i in a){var r=a[i];r&&r.key&&r.value&&(n=s(r.key,r.value,n))}return window.location.href=n,!1}function s(e,t,a){a=a||window.location.href;var n=new RegExp("([?|&])"+e+"=.*?(&|#|$)","gi");if(a.match(n))return t?a.replace(n,"$1"+e+"="+t+"$2"):a.replace(n,"$2");if(t){var i=-1!==a.indexOf("?")?"&":"?",r=a.split("#");return a=r[0]+i+e+"="+t,r[1]&&(a+="#"+r[1]),a}return a}return{init:function(e){var t={selector:".search-query",btnSelector:".global-search-btn",googleId:"",query:"",resultUrl:""};(t=a.extend({},t,e)).resultUrl&&t.selector&&t.googleId&&(a(t.selector).keydown(function(e){if(13==(e=e||window.event).keyCode||13==e.which)return e.preventDefault(),n(t)}),a(t.btnSelector).click(function(e){return e.preventDefault(),n(t)}))}}}(jQuery);var UAlberta=UAlberta||{};UAlberta.lazyLoaderInstance=new LazyLoad({elements_selector:"img, .lazy-load",data_src:"llsrc",class_loading:"lazy-load-requested",class_loaded:"lazy-loaded",class_error:"lazy-load-error"}),$(document).ready(function(){var e=$(window).height()-($("header").height()+$("footer").height()+20),a=$("#main-nav .navigation-toggle span");$(".content-wrapper").css("min-height",e+"px"),$(".heading-link").tooltip(),$(".nav-toggle").on("click",function(e){return $(this).parent().toggleClass("expanded"),$(this).parent().parent().toggleClass("nav-expand"),e.stopPropagation(),!1}),$("header .navigation-toggle").on("click",function(e){return $(this).toggleClass("collapsed"),$("header .nav-wrapper").toggleClass("on"),$("header .nav-wrapper").trigger("classToggled","on"),e.stopPropagation(),!1}),$("header .nav-wrapper").on("classToggled",function(e,t){a.html($(this).hasClass(t)?UAlberta.Sitecore.Localization.HIDE_NAVIGATION:UAlberta.Sitecore.Localization.SHOW_NAVIGATION)}),$('.nav-tabs a[data-toggle="tab"]').on("shown.bs.tab",function(e){UAlberta.lazyLoaderInstance&&UAlberta.lazyLoaderInstance.update()}),$(".collapse").collapse(),UAlberta.InputPlaceholders.initialize()}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,a=Number(arguments[1])||0;for((a=a<0?Math.ceil(a):Math.floor(a))<0&&(a+=t);a<t;a++)if(a in this&&this[a]===e)return a;return-1}),$(document).ready(function(){var t,a=null;function e(){var e=$(".sidebar").height()+110+"px";979<$(window).width()&&t&&t.css("min-height",e),689<$(window).width()&&a&&a.css("min-height",e)}$(".content-wrapper").hasClass("landing-page")&&(t=$(".content-wrapper.landing-page")),$(".content-wrapper").hasClass("faculty-home")&&(a=$(".content-wrapper.faculty-home")),e(),$(window).resize(e)});var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.AthleticsGameList=UAlberta.Sitecore.AthleticsGameList||{GetInstance:function(){return function(t){"use strict";var i={serviceUrl:"",displayLimit:8,Constants:{ProgramType:{Bears:1,Pandas:2,Athletics:3}}},v={NO_GAMES:"There are no games to display.",RECAP:"Recap",BOXSCORE:"Boxscore",ERROR_LOADING:"An error occurred while loading the games. Please refresh the page to try again."},y=function(e){switch(e){case i.Constants.ProgramType.Bears:return"bears";case i.Constants.ProgramType.Pandas:return"pandas";default:return"athletics"}},r={getGames:function(){t.ajax({dataType:"json",error:r.Events.error,success:r.Events.success,url:i.serviceUrl+"&limit="+i.displayLimit})},Events:{error:function(){b.showError()},success:function(e){b.showGames(e)}}},b={container:[],setup:function(e){b.container=t("#"+e)},showGames:function(e){b.container.find("li:first").remove();var t=b.container.html();if(0!=e.length){for(var a in b.container.html(""),e){var n=e[a],i=n.Completed?"played-game":"upcoming-game",r=n.HomeTeam.IsUAlberta,o=y(r?n.HomeTeam.Program.ID:n.AwayTeam.Program.ID),s=r?null==n.HomeTeam.Name?"":n.HomeTeam.Name+" ":null==n.AwayTeam.Name?"":n.AwayTeam.Name+" ",l=n.IsEvent?n.EventName:r?"vs "+n.AwayTeam.Name:"@ "+n.HomeTeam.Name,c=!!n.Completed&&n.HomeScore>n.AwayScore,d=n.Completed&&n.HomeScore==n.AwayScore,u=r&&c||!r&&!c,p=n.Completed&&!n.IsEvent?"<span class='WL'>"+(c?n.HomeScore:n.AwayScore)+" - "+(c?n.AwayScore:n.HomeScore)+"<span>"+(d?"T":u?n.Overtime?"OTW":"W":n.Overtime?"OTL":"L")+"</span></span>":UAlberta.Sitecore.Utilities.GetDateFromJson(n.Start,UAlberta.Sitecore.Utilities.DateFormat.LongNoYear),h=null!=n.GameUrl?n.GameUrl:"#",f=null!=n.TeamUrl?n.TeamUrl:"#",m=null!=n.RecapUrl?" | <a href='"+n.RecapUrl+"'>"+v.RECAP+"</a>":"",g="<li class='schedule-module "+i+" "+o+"'><h5 class='schedule-title'><a href='"+h+"'>"+p+"</a>"+(n.Completed?"<span class='schedule-links'>"+m+" | <a href='"+h+"'>"+v.BOXSCORE+"</a></span>":"")+"</h5><span class='schedule-teams'><a href='"+f+"'>"+s+n.HomeTeam.Sport.Description+"</a> "+l+"</span></li>";b.container.append(g)}b.container.append(t)}else b.container.html("<li>"+v.NO_GAMES+"</li>"+t)},showError:function(){b.container.find("li:first").remove();var e=b.container.html();b.container.html("<li>"+v.ERROR_LOADING+"</li>"+e)}};return{Initialize:function(e,t,a,n){i.serviceUrl=t,i.displayLimit=a,n&&(v=n),b.setup(e),r.getGames()}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.AthleticsGameSlider=UAlberta.Sitecore.AthleticsGameSlider||{GetInstance:function(){return function(n){"use strict";var I={serviceUrl:"",games:[],currentDisplay:0,Constants:{DisplaySize:{Small:2,Medium:4,Large:6},ProgramType:{Bears:1,Pandas:2,Athletics:3}}},L={GAME_INFO:"Game Info",ERROR_GAME:"An error occurred while loading the games. Please refresh the page to try again.",RECAP:"Recap",PREVIEW:"Preview"},i=function(){var e;switch(UAlberta.Sitecore.Utilities.GetWindowType()){case UAlberta.Sitecore.Utilities.WindowType.Small:case UAlberta.Sitecore.Utilities.WindowType.Mobile:e=I.Constants.DisplaySize.Small;break;case UAlberta.Sitecore.Utilities.WindowType.Tablet:e=I.Constants.DisplaySize.Medium;break;default:e=I.Constants.DisplaySize.Large}return e},x=function(e){switch(e){case I.Constants.ProgramType.Bears:return"bears";case I.Constants.ProgramType.Pandas:return"pandas";default:return"athletics"}},a={loadingData:!1,getGames:function(t){if(!a.loadingData){a.loadingData=!0;var e="";null!=t&&(e+="&aftergame="+encodeURIComponent(t)),n.ajax({dataType:"json",error:a.Events.error,success:function(e){a.Events.success(e,0<t)},url:I.serviceUrl+"&limit="+I.currentDisplay+e})}},Events:{error:function(){D.showError(),a.loadingData=!1},success:function(e,t){D.addGames(e,t,!1),a.loadingData=!1}}},D={slider:[],setup:function(e){I.currentDisplay=i(),n("#"+e).flexslider({animation:"slide",animationLoop:!1,controlNav:!1,slideshow:!1,start:D.Events.sliderStart,after:D.Events.sliderAfter}),n(window).resize(function(){UAlberta.Sitecore.Utilities.Delay(D.Events.resize,300,e+"-resize")})},addGames:function(e,t,a){if(0==e.length&&!a)return 0==I.games.length&&D.slider.remove(),void D.slider.removeSlide(t?D.slider.count-1:0);var n=[],i=[],r=t?D.slider.count-1:1,o=t?I.games.length:0,s=r-1,l=0==I.games.length;for(var c in e){var d=e[c],u=d.Completed?"played-game":"upcoming-game",p=d.HomeTeam.IsUAlberta,h=x(p?d.HomeTeam.Program.Id:d.AwayTeam.Program.Id),f=d.IsEvent?d.EventName:p?"vs "+d.AwayTeam.Name:"@ "+d.HomeTeam.Name,m=!!d.Completed&&d.HomeScore>d.AwayScore,g=d.Completed&&d.HomeScore==d.AwayScore,v=p&&m||!p&&!m,y=d.Completed&&!d.IsEvent?(m?d.HomeScore:d.AwayScore)+" - "+(m?d.AwayScore:d.HomeScore)+" "+(g?"T":v?d.Overtime?"OTW":"W":d.Overtime?"OTL":"L"):UAlberta.Sitecore.Utilities.GetDateFromJson(d.Start,UAlberta.Sitecore.Utilities.DateFormat.ShortNoYear),b=d.HomeTeam.Sport.Description.toLowerCase().replace(/\s/g,"-"),C=null!=d.GameUrl?d.GameUrl:"#",S=null!=d.TeamUrl?d.TeamUrl:"#",T=null!=d.RecapUrl&&d.Completed?"<a href='"+d.RecapUrl+"'>"+L.RECAP+"</a> | ":null!=d.PreviewUrl?"<a href='"+d.PreviewUrl+"'>"+L.PREVIEW+"</a> | ":"",w="<div class='extrude score-module "+u+" "+h+"' data-id='"+d.Id+"'><h5 class='score-title'><a href='"+S+"'><i class='icon-"+b+"'></i> "+d.HomeTeam.Sport.Description+"</a><span class='score-hover-links'>"+T+"<a href='"+C+"'>"+L.GAME_INFO+"</a></span></h5><span class='score-opponent'>"+f+"</span><div class='score-results'><a href='"+C+"'><h3>"+y+"</h3></a></div></div>";if(n.push(w),i.push(d),(n.length==I.currentDisplay||c==e.length-1)&&(D.slider.addSlide("<li>"+n.join("")+"</li>",r),n.length=0,r++,t||s++,!a)){for(var A in i)I.games.splice(o,0,i[A]),o++;i.length=0}}if(null!=D.slider.vars){var E=D.slider.vars.animationSpeed;D.slider.vars.animationSpeed=0,D.slider.flexAnimate(l?1:0<D.slider.currentSlide?s+1:s),D.slider.vars.animationSpeed=E}else D.slider.flexAnimate(l?1:s)},showError:function(){D.slider.html(L.ERROR_GAME)},Events:{sliderStart:function(e){D.slider=e,a.getGames()},sliderAfter:function(e){0==e.animatingTo&&e.slides.first().hasClass("loading")&&a.getGames(-1*I.games[0].Id),e.animatingTo==e.count-1&&e.slides.last().hasClass("loading")&&a.getGames(I.games[I.games.length-1].Id)},resize:function(){var e=i();if(e!=I.currentDisplay){I.currentDisplay=e;var t=n(D.slider.slides[D.slider.currentSlide]).find(".score-module:first").data("id");D.slider.slides.first().hasClass("loading")||D.slider.addSlide("<li class='loading'></li>",0),D.slider.slides.last().hasClass("loading")||D.slider.addSlide("<li class='loading'></li>");for(var a=D.slider.count-1;0<=a;a--)n(D.slider.slides[a]).hasClass("loading")||D.slider.removeSlide(a);D.addGames(I.games,!1,!0),D.slider.flexAnimate(D.slider.slides.find("[data-id="+t+"]").parent().index())}}}};return{Initialize:function(e,t,a){a&&(a.GAME_INFO&&(L.GAME_INFO=a.GAME_INFO),a.ERROR_GAME&&(L.ERROR_GAME=a.ERROR_GAME),a.RECAP&&(L.RECAP=a.RECAP),a.PREVIEW&&(L.PREVIEW=a.PREVIEW)),I.serviceUrl=t,D.setup(e)}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.AthleticsRoster=UAlberta.Sitecore.AthleticsRoster||{GetInstance:function(){return function(a){"use strict";var i={serviceUrl:""},r={POSITION:"Position",HEIGHT:"Height",ELIGIBILITY:"Eligibility",FACULTY:"Faculty",HOMETOWN:"Hometown",LAST_TEAM:"Last Team",EXPERIENCE:"Experience",TWITTER:"Twitter",EMAIL:"EMail",YEARS:"year(s)",ADOPT_ATHLETE:"Adopt This Athlete",ERROR_PERSON:"An error occurred while obtaining the person. Please refresh the page and try again."},n={getPerson:function(t,e){a.ajax({dataType:"json",error:function(){n.Events.error(t)},success:function(e){n.Events.success(t,e)},url:i.serviceUrl.replace("{id}",encodeURIComponent(e))})},Events:{error:function(e){o.showError(e)},success:function(e,t){o.showPerson(e,t)}}},o={historyCount:0,setup:function(e){a("#"+e).find("li[data-id]").not("li[data-id$='-bio']").click(function(){var e=a(this).next();a(".roster li[data-id$='-bio']").not(e).addClass("hidden"),e.hasClass("loading")&&n.getPerson(a(this),a(this).data("id")),e.toggleClass("hidden"),window.location.hash=e.hasClass("hidden")?"":a(this).attr("id")}),setTimeout(function(){o.expandPerson(e)},100),a(window).hashchange(function(){o.expandPerson(e)})},expandPerson:function(e){var t=window.location.hash.replace("#","");""==t?a(".roster li[data-id$='-bio']").addClass("hidden"):a("#"+e).find("#"+t).next().hasClass("hidden")&&a("#"+e).find("#"+t).click()},showPerson:function(e,t){var a=e.next();a.toggleClass("loading");var n="";t.HasPhoto&&(n+="<img src='"+i.serviceUrl.replace("{id}",encodeURIComponent(t.Id))+"/image' alt='"+t.FirstName+" "+t.LastName+"'/>"),n+="<ul class='roster-item'>",n+=o.addField(r.POSITION,t.Position),n+=o.addField(r.HEIGHT,t.Height),n+=o.addField(r.ELIGIBILITY,t.Eligibility),n+=o.addField(r.FACULTY,t.Faculty),n+=o.addField(r.HOMETOWN,t.Hometown),n+=o.addField(r.LAST_TEAM,t.PreviousTeam),n+=o.addField(r.EXPERIENCE,t.Years," "+r.YEARS),n+=o.addField(r.TWITTER,null!=t.Twitter&&""!=t.Twitter?"<a href='http://twitter.com/"+t.Twitter+"' target='_blank'>@"+t.Twitter+"</a>":t.Twitter),n+=o.addField(r.EMAIL,null!=t.Email&&""!=t.Email?"<a href='mailto:"+t.Email+"'>"+t.Email+"</a>":t.Email),null!=t.AdoptUrl&&""!=t.AdoptUrl&&(n+="<li><a class='btn btn-micro btn-green' href='"+t.AdoptUrl+"' target='_blank'>"+r.ADOPT_ATHLETE+"</a></li>"),n+="</ul>",n+="<div>"+t.Bio+"</div>",a.html(n)},addField:function(e,t,a){return null==a&&(a=""),null!=t&&""!=t?"<li><span>"+e+":</span> "+t+a+"</li>":""},showError:function(e){var t=e.next();t.toggleClass("loading"),t.html(r.ERROR_PERSON)}};return{Initialize:function(e,t,a){a&&(a.POSITION&&(r.POSITION=a.POSITION),a.HEIGHT&&(r.HEIGHT=a.HEIGHT),a.ELIGIBILITY&&(r.ELIGIBILITY=a.ELIGIBILITY),a.FACULTY&&(r.FACULTY=a.FACULTY),a.HOMETOWN&&(r.HOMETOWN=a.HOMETOWN),a.LAST_TEAM&&(r.LAST_TEAM=a.LAST_TEAM),a.EXPERIENCE&&(r.EXPERIENCE=a.EXPERIENCE),a.TWITTER&&(r.TWITTER=a.TWITTER),a.EMAIL&&(r.EMAIL=a.EMAIL),a.YEARS&&(r.YEARS=a.YEARS),a.ADOPT_ATHLETE&&(r.ADOPT_ATHLETE=a.ADOPT_ATHLETE),a.ERROR_PERSON&&(r.ERROR_PERSON=a.ERROR_PERSON)),i.serviceUrl=t,o.setup(e)}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.AthleticsSchedule=UAlberta.Sitecore.AthleticsSchedule||{GetInstance:function(){return function(r){"use strict";var p={teams:[],teamItems:[],currentDate:"",games:[],teamId:[],Constants:{CalendarTypes:{Day:"day",Month:"month"},DatePostfix:"T00:00:00.000-00:00",GamesPerPage:10}},h={ERROR_GAME_EVENT:"An error occurred while obtaining game/event information. Please refresh the page and try again.",NO_GAME_EVENT_FOUND:"No Games/Events Found"},o={padLeft:function(e,t,a){return e.toString().length<a?o.padLeft(t+e,t,a):e},getMultilistValue:function(e){return e.multiselect("getSelected").val()||[]},setMultilistValue:function(e,t){e.val(t),e.multiselect("refresh")},getDatepickerValue:function(e){return e.data("datepicker").getFormattedDate()},isDateBefore:function(e,t){var a=Date.parse(e.substr(0,10)),n=Date.parse(t.substr(0,10));return isNaN(a)&&(a=Date.parse(r.format.date(e.substr(0,10)+p.Constants.DatePostfix,UAlberta.Sitecore.Utilities.DateFormat.Short)),n=Date.parse(r.format.date(t.substr(0,10)+p.Constants.DatePostfix,UAlberta.Sitecore.Utilities.DateFormat.Short))),!isNaN(a)&&!isNaN(n)&&a<=n}},s={currentRequest:void 0,getGames:function(e,t){null!=s.currentRequest&&s.currentRequest.abort(),e=void 0!==e?e:o.getMultilistValue(f.calendarTypeControl);var a=(t=void 0!==t?t:e==p.Constants.CalendarTypes.Month?f.monthVisible+"-01":o.getDatepickerValue(f.calendarControl)).substr(0,7);f.showDateText(e,t),f.gameListControl.html(""),f.gamePagingControl.html(""),f.showLoading();var n={Month:a};if(null==p.games[a]){var i="";1<p.teamId.length&&(i="Program/"+p.teamId[0]+"/Sport/"+p.teamId[1]+"/"),s.currentRequest=r.ajax({cache:!1,contentType:"application/json; charset=utf-8",data:r.toJSON(n),dataType:"json",error:s.Events.error,success:function(e){s.Events.success(a,e)},type:"POST",url:"/api/athletics/"+i+"games.json"})}else f.showGames(p.games[a])},Events:{error:function(){f.gameListControl.html("<li><p>"+h.ERROR_GAME_EVENT+"</p></li>"),s.currentRequest=void 0},success:function(e,t){p.games[e]=t,f.showGames(t),s.currentRequest=void 0}}},f={containerId:"",calendarControl:[],calendarTypeControl:[],teamListControl:[],dateTextControl:[],gameListControl:[],gamePagingControl:[],monthVisible:"",gamesVisible:[],loadingSelector:"",setup:function(e){f.containerId=e,f.calendarControl=r("#"+f.containerId+" .event-list-calendar-filter"),f.calendarTypeControl=r("#"+f.containerId+" .filter-day select"),f.teamListControl=r("#"+f.containerId+" .calendar-event select"),f.dateTextControl=r("#"+e+" .latest-news .filtered-by"),f.gameListControl=r("#"+e+" .event-list"),f.gamePagingControl=r("#"+e+" .events-pagination"),f.loadingSelector="#"+e+" .events-loading",f.calendarTypeControl.val(p.Constants.CalendarTypes.Month),""!=window.location.hash&&f.teamListControl.val(window.location.hash.replace("#","").split(";")),f.calendarControl.datepicker({format:"yyyy-mm-dd",todayHighlight:!0}).on("changeMonth",f.Events.monthChanged).on("changeDate",f.Events.dateSelected),f.calendarTypeControl.multiselect({onChange:f.Events.calendarTypeChanged}),f.teamListControl.multiselect({buttonText:UAlberta.Sitecore.Utilities.MultiselectButtonText,onChange:function(e){window.location.hash=o.getMultilistValue(f.teamListControl).join(";"),f.Events.filterListChanged()}}),r(window).hashchange(function(){o.setMultilistValue(f.teamListControl,window.location.hash.replace("#","").split(";")),s.getGames()}),f.monthVisible=o.getDatepickerValue(f.calendarControl).substr(0,7)},showDateText:function(e,t){var a="| ";switch(e){case p.Constants.CalendarTypes.Day:a+=r.format.date(t+" ","ddd, MMMM d, yyyy");break;case p.Constants.CalendarTypes.Month:a+=r.format.date(t+" ","MMMM, yyyy")}f.dateTextControl.html(a)},showGames:function(e){for(var t in f.gamesVisible.length=0,e){var a=e[t];null!=a.Id&&(a.StartDate=UAlberta.Sitecore.Utilities.GetDateFromJson(a.Start,UAlberta.Sitecore.Utilities.DateFormat.ShortNoYear),a.StartTime=UAlberta.Sitecore.Utilities.GetDateFromJson(a.Start,UAlberta.Sitecore.Utilities.DateFormat.TimeOnly),a.StartUnix=UAlberta.Sitecore.Utilities.GetDateFromJson(a.Start,UAlberta.Sitecore.Utilities.DateFormat.UnixDateOnly),f.checkFilters(a)&&f.gamesVisible.push(a))}f.showPage(1)},showPaging:function(e){if(f.gamePagingControl.html(""),0!=f.gamesVisible.length){var t=parseInt(e),a=Math.ceil(f.gamesVisible.length/10);if(1!=a){for(var n=1;n<=a;n++)n==t?f.gamePagingControl.append('<li class="active">'+n+"</li>"):f.gamePagingControl.append('<li><a href="javascript:void(null)">'+n+"</a></li>");f.gamePagingControl.find("a").click(f.Events.pageClicked)}}},showPage:function(e){if(f.gameListControl.html(""),0!=f.gamesVisible.length){for(var t=(parseInt(e)-1)*p.Constants.GamesPerPage;t<p.Constants.GamesPerPage*e;t++){var a=f.gamesVisible[t];if(null!=a){var n=a.HomeTeam.IsUAlberta,i=n?null==a.HomeTeam.Name?"":a.HomeTeam.Name+" ":null==a.AwayTeam.Name?"":a.AwayTeam.Name+" ",r=!!a.Completed&&a.HomeScore>a.AwayScore,o=a.Completed&&a.HomeScore==a.AwayScore,s=n&&r||!n&&!r,l=i+a.HomeTeam.Sport.Description+(a.IsEvent?": "+a.EventName:n?" vs "+a.AwayTeam.Name:" @ "+a.HomeTeam.Name),c=a.StartDate+("12:00 AM"==a.StartTime?"":" "+a.StartTime),d=a.Completed&&!a.IsEvent?(r?a.HomeScore:a.AwayScore)+" - "+(r?a.AwayScore:a.HomeScore)+"<span>"+(o?"T":s?a.Overtime?"OTW":"W":a.Overtime?"OTL":"L")+"</span>":"",u='<li><a href="'+a.GameUrl+'"><div class="list-item-content"><h4>'+l+'</h4><p class="list-item-extra">'+c+"</p>"+(d?'<p class="list-item-extra">'+d+"</p>":"")+"</div></a></li>";f.gameListControl.append(u)}}f.showPaging(e)}else f.gameListControl.html("<li><h4>"+h.NO_GAME_EVENT_FOUND+"</h4></li>")},checkFilters:function(e){switch(o.getMultilistValue(f.calendarTypeControl)){case p.Constants.CalendarTypes.Day:if(o.getDatepickerValue(f.calendarControl)!=e.StartUnix)return!1;break;case p.Constants.CalendarTypes.Month:}var t=o.getMultilistValue(f.teamListControl);return!(0<t.length&&r.inArray(e.HomeTeam.Program.Id+"-"+e.HomeTeam.Sport.Id,t)<0)},showLoading:function(){0==r(f.loadingSelector).length&&f.gameListControl.append('<li class="loading"></li>')},Events:{monthChanged:function(e){o.setMultilistValue(f.calendarTypeControl,p.Constants.CalendarTypes.Month),f.monthVisible=e.date.getUTCFullYear()+"-"+o.padLeft(e.date.getUTCMonth()+1,"0",2),s.getGames(p.Constants.CalendarTypes.Month,f.monthVisible+"-01")},dateSelected:function(e){o.setMultilistValue(f.calendarTypeControl,p.Constants.CalendarTypes.Day);var t=e.date.getUTCFullYear()+"-"+o.padLeft(e.date.getUTCMonth()+1,"0",2)+"-"+o.padLeft(e.date.getUTCDate(),"0",2);s.getGames(p.Constants.CalendarTypes.Day,t)},calendarTypeChanged:function(e){s.getGames()},filterListChanged:function(){s.getGames()},pageClicked:function(){f.showPage(r(this).html())}}};return{Initialize:function(e,t,a){a&&(a.ERROR_GAME_EVENT&&(h.ERROR_GAME_EVENT=a.ERROR_GAME_EVENT),a.NO_GAME_EVENT_FOUND&&(h.NO_GAME_EVENT_FOUND=a.NO_GAME_EVENT_FOUND)),f.setup(e),p.teamId=t.split("-"),p.teams=f.teamListControl.children().map(function(){return this.value}).get(),f.teamListControl.children().each(function(){p.teamItems[this.value]=this.text}),p.currentDate=o.getDatepickerValue(f.calendarControl),s.getGames(o.getMultilistValue(f.calendarTypeControl),p.currentDate)}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.DataList=function(m){var g={ContainerId:"",ServiceUrl:"",CssClassPrefix:"data",ShowDate:!0,ShowDescription:!0,ItemsPerPage:20},t="",v="";function a(e){if(0<e.length){for(var t=0;t<e.length;t++){var a="."+g.CssClassPrefix+"-module";m(a).toggleClass("loading");var n,i=e[t],r=document.createElement("li"),o=document.createElement("h4"),s=30<i.Title.length,l=s?i.Title.substr(0,29):i.Title;if(l=s?l.substr(0,l.lastIndexOf(" ")):l,n=s?l+"...":l,""!=i.Link){var c=document.createElement("a");c.href=i.Link,c.innerHTML=n,o.appendChild(c)}else o.innerHTML=n;r.appendChild(o);var d=i.Date.match(/\d+/);if(""!=d&&g.ShowDate){var u=document.createElement("p");u.className="date";var p=parseInt(d[0]),h=new Date(p);u.innerHTML=h.toLocaleDateString(),r.appendChild(u)}if(""!=i.Description&&g.ShowDescription){var f=document.createElement("p");f.className="description",f.innerHTML=i.Description,r.appendChild(f)}m(g.ContainerId).append(r)}e.length>g.ItemsPerPage&&m(".data-list-navigation").jPages({containerID:"data-list",minHeight:"",startPage:v,perPage:g.ItemsPerPage,first:"first",previous:"previous",next:"next",last:"last",startRange:1,midRange:5,endRange:1,callback:function(e,t){m.cookie("data-list-current-page",e.current,{expires:1,path:"/"})}})}}function n(){}return{Initialize:function(e){m.extend(g,e),t=m.cookie("data-list-current-page"),v=""==t||null==t?1:t,m.ajax({type:"GET",dataType:"json",url:g.ServiceUrl,timeout:3e4,success:a,error:n})}}}(jQuery);var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.Event=UAlberta.Sitecore.Event||{GetInstance:function(){return function(t){"use strict";var n={event:{}},i={ERROR_EVENT_CAMPUS_MAPS:"No event was specified to be viewed on Campus Maps.\n\nPlease refresh the page and try again."},r={setup:function(e){t("title").html(t("title").html().trim().replace(/^Event/,n.event.Title)),t("ul.breadcrumbs > li.bc-here").html(n.event.Title),t("h2.page-title").html(n.event.Title),t("#"+e+" .event-map-link").click(r.Events.mapLinkClicked)},Events:{mapLinkClicked:function(){var e=n.event;null!=e.Title?(0==t("#hiddenFormContainer").length&&t("body").append('<div id="hiddenFormContainer"></div>'),t("#hiddenFormContainer").html("").append(t("<form>").attr({method:"POST",action:"http://www.campusmap.ualberta.ca",id:"hidForm",target:"_blank"}).append(t("<input>").attr({type:"hidden",name:"title",value:e.Title})).append(t("<input>").attr({type:"hidden",name:"desc",value:e.Description})).append(t("<input>").attr({type:"hidden",name:"location",value:e.Location})).append(t("<input>").attr({type:"hidden",name:"time",value:e.Date})).append(t("<input>").attr({type:"hidden",name:"category",value:e.Categories})).append(t("<input>").attr({type:"hidden",name:"faculty",value:e.Calendars})).append(t("<input>").attr({type:"hidden",name:"lat",value:e.PositionLat})).append(t("<input>").attr({type:"hidden",name:"lng",value:e.PositionLng})).submit())):alert(i.ERROR_EVENT_CAMPUS_MAPS)}}};return{Initialize:function(e,t,a){n.event=t,a&&a.ERROR_EVENT_CAMPUS_MAPS&&(i.ERROR_EVENT_CAMPUS_MAPS=a.ERROR_EVENT_CAMPUS_MAPS),r.setup(e)}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.EventList=UAlberta.Sitecore.EventList||{GetInstance:function(){return function(o){"use strict";var s={calendars:[],calendarItems:[],categoryItems:[],currentDate:"",events:[],Constants:{CalendarTypes:{Current:"current",Day:"day",Month:"month"},DateFormats:{Long:"MMM d, yyyy h:mm a",Short:"MMM d, yyyy",TimeOnly:"h:mm a"},DatePostfix:"T00:00:00.000-00:00",EventsPerPage:10}},l={ERROR_EVENT_INFORMATION:"An error occurred while obtaining event information. Please refresh the page and try again.",SHOW_MORE_EVENTS:"Show More Events",NO_EVENTS_FOUND:"No Events Found"},c={padLeft:function(e,t,a){return e.toString().length<a?c.padLeft(t+e,t,a):e},getMultilistValue:function(e){return e.multiselect("getSelected").val()||[]},setMultilistValue:function(e,t){e.val(t),e.multiselect("refresh")},getDatepickerValue:function(e){return e.data("datepicker").getFormattedDate()},isDateInRange:function(e,t,a){var n=Date.parse(e.substr(0,10)),i=Date.parse(t.substr(0,10)),r=Date.parse(a.substr(0,10));return isNaN(n)&&(n=Date.parse(o.format.date(e.substr(0,10)+s.Constants.DatePostfix,s.Constants.DateFormats.Short)),i=Date.parse(o.format.date(t.substr(0,10)+s.Constants.DatePostfix,s.Constants.DateFormats.Short)),r=Date.parse(o.format.date(a.substr(0,10)+s.Constants.DatePostfix,s.Constants.DateFormats.Short))),!(isNaN(n)||isNaN(i)||isNaN(r))&&i<=n&&n<=r},isDateBefore:function(e,t){var a=Date.parse(e.substr(0,10)),n=Date.parse(t.substr(0,10));return isNaN(a)&&(a=Date.parse(o.format.date(e.substr(0,10)+s.Constants.DatePostfix,s.Constants.DateFormats.Short)),n=Date.parse(o.format.date(t.substr(0,10)+s.Constants.DatePostfix,s.Constants.DateFormats.Short))),!isNaN(a)&&!isNaN(n)&&a<=n},formatDateRange:function(e,t){var a=s.Constants.DateFormats.Long;return 10==e.length&&(a=s.Constants.DateFormats.Short,(e+=s.Constants.DatePostfix)==(t+=s.Constants.DatePostfix))?o.format.date(e,a):o.format.date(e,a)+" - "+o.format.date(t,e.substr(0,10)!=t.substr(0,10)?a:s.Constants.DateFormats.TimeOnly)},arrayIntersect:function(e,t){return o.map(e,function(e){return o.inArray(e,t)<0?null:e})},addClickHandler:function(e,t){null!=e.data("events")&&null!=e.data("events").click||e.click(t)},isAndroid:function(){return-1<navigator.userAgent.toLowerCase().indexOf("android")}},r={currentRequest:void 0,getEvents:function(e,t){null!=r.currentRequest&&r.currentRequest.abort(),e=void 0!==e?e:c.getMultilistValue(d.calendarTypeControl);var a=(t=void 0!==t?t:e==s.Constants.CalendarTypes.Month?d.monthVisible+"-01":c.getDatepickerValue(d.calendarControl)).substr(0,7);d.showDateText(e,t),d.eventListControl.html(""),d.eventPagingControl.html(""),d.showLoading();var n={Calendars:s.calendars,Month:a};null==s.events[a]?r.currentRequest=o.ajax({cache:!1,contentType:"application/json; charset=utf-8",data:o.toJSON(n),dataType:"json",error:r.Events.error,success:function(e){r.Events.success(a,e)},type:"POST",url:"/api/events/eventlist.json"}):d.showEvents(s.events[a])},Events:{error:function(){d.eventListControl.html("<li><p>"+l.ERROR_EVENT_INFORMATION+"</p></li>"),r.currentRequest=void 0},success:function(e,t){s.events[e]=t,d.showEvents(t),r.currentRequest=void 0}}},d={containerId:"",isCondensedView:!1,hideCategories:!1,eventsPath:"",calendarControl:[],calendarTypeControl:[],calendarListControl:[],categoryListControl:[],dateTextControl:[],eventListControl:[],eventPagingControl:[],monthVisible:"",eventsVisible:[],loadingSelector:"",subscribeButton:"",setup:function(e,t,a,n){d.containerId=e,d.isCondensedView=t,d.hideCategories=a,d.eventsPath=n,d.calendarControl=o("#"+d.containerId+" .event-list-calendar-filter"),d.calendarTypeControl=o("#"+d.containerId+" .filter-day select"),d.calendarListControl=o("#"+d.containerId+" .calendar-event select"),d.subscribeListControl=o("#"+d.containerId+" .subscribe-event select"),d.categoryListControl=o("#"+e+" .category-event select"),d.dateTextControl=o("#"+e+" .latest-news .filtered-by"),d.eventListControl=o("#"+e+" .event-list"),d.eventPagingControl=o("#"+e+" .events-pagination"),d.loadingSelector="#"+e+" .events-loading",d.subscribeButton=o("#"+e+" .subscribe"),d.isCondensedView&&(o("#"+d.containerId+" .filter-cont .span6").removeClass("span6"),o("#"+d.containerId+" .news-heading").hide(),s.Constants.EventsPerPage=5),d.calendarTypeControl.val(s.Constants.CalendarTypes.Current),d.calendarControl.datepicker({format:"yyyy-mm-dd",todayHighlight:!0}).on("changeMonth",d.Events.monthChanged).on("changeDate",d.Events.dateSelected),d.calendarTypeControl.multiselect({onChange:d.Events.calendarTypeChanged}),d.calendarListControl.multiselect({buttonText:UAlberta.Sitecore.Utilities.MultiselectButtonText,onChange:d.Events.filterListChanged}),d.categoryListControl.multiselect({buttonText:UAlberta.Sitecore.Utilities.MultiselectButtonText,onChange:d.Events.filterListChanged}),d.subscribeListControl.multiselect({onChange:d.Events.subscribeCalendarChanged}),1==d.calendarListControl.children().length&&o("#"+d.containerId+" .calendar-event").hide(),d.hideCategories&&o("#"+d.containerId+" .category-event").hide(),0!=d.subscribeListControl.children().length&&!c.isAndroid()||o("#"+d.containerId+" .subscribe-event").hide(),d.monthVisible=c.getDatepickerValue(d.calendarControl).substr(0,7)},showDateText:function(e,t){var a="| ";switch(e){case s.Constants.CalendarTypes.Current:a+=d.calendarTypeControl.find(":selected").html();break;case s.Constants.CalendarTypes.Day:a+=o.format.date(t+" ","ddd, MMMM d, yyyy");break;case s.Constants.CalendarTypes.Month:a+=o.format.date(t+" ","MMMM, yyyy")}d.dateTextControl.html(a)},showEvents:function(e){for(var t in d.eventsVisible.length=0,e){var a=e[t];d.checkFilters(a)&&d.eventsVisible.push(a)}d.showPage(1)},showPaging:function(e){if(d.eventPagingControl.html(""),0!=d.eventsVisible.length){var t=parseInt(e),a=Math.ceil(d.eventsVisible.length/10);if(1!=a){for(var n=1;n<=a;n++)n==t?d.eventPagingControl.append('<li class="active">'+n+"</li>"):d.eventPagingControl.append('<li><a href="javascript:void(null)">'+n+"</a></li>");d.eventPagingControl.find("a").click(d.Events.pageClicked)}}},showPage:function(e){if(d.eventListControl.html(""),0!=d.eventsVisible.length){for(var t=(parseInt(e)-1)*s.Constants.EventsPerPage;t<s.Constants.EventsPerPage*e;t++){var a=d.eventsVisible[t];if(null!=a){var n=c.formatDateRange(a.StartDate,a.EndDate),i=null==a.Calendars||null==a.Calendars[0]||null==s.calendarItems[a.Calendars[0]]?"#":d.eventsPath+s.calendarItems[a.Calendars[0]].key+"/"+a.EventId,r=null==a.Location?"":a.Location,o='<li><a href="'+i+'"><div class="list-item-content"><h4>'+a.Title+'</h4><p class="list-item-extra">'+n+"</p>"+(d.isCondensedView?"":'<p class="list-item-extra">'+r+"</p>")+"</div></a></li>";d.eventListControl.append(o)}}d.isCondensedView?(d.eventListControl.append('<li class="bottom-row"><a href="/events">'+l.SHOW_MORE_EVENTS+"</a></li>"),d.eventPagingControl.hide()):d.showPaging(e)}else d.eventListControl.html("<li><h4>"+l.NO_EVENTS_FOUND+"</h4></li>")},checkFilters:function(e){if(null==e.StartDate||null==e.EndDate)return!1;switch(c.getMultilistValue(d.calendarTypeControl)){case s.Constants.CalendarTypes.Current:if(!c.isDateBefore(c.getDatepickerValue(d.calendarControl),e.EndDate))return!1;break;case s.Constants.CalendarTypes.Day:if(!c.isDateInRange(c.getDatepickerValue(d.calendarControl),e.StartDate,e.EndDate))return!1;break;case s.Constants.CalendarTypes.Month:}var t=c.getMultilistValue(d.calendarListControl),a=null==e.Calendars?[]:o.map(e.Calendars,function(e){return e});if(0<t.length&&0==c.arrayIntersect(t,a).length)return!1;var n=c.getMultilistValue(d.categoryListControl),i=null==e.Categories?[]:o.map(e.Categories,function(e){return e});return!(0<n.length&&0==c.arrayIntersect(n,i).length)},showLoading:function(){0==o(d.loadingSelector).length&&d.eventListControl.append('<li class="loading"></li>')},Events:{monthChanged:function(e){c.setMultilistValue(d.calendarTypeControl,s.Constants.CalendarTypes.Month),d.monthVisible=e.date.getUTCFullYear()+"-"+c.padLeft(e.date.getUTCMonth()+1,"0",2),r.getEvents(s.Constants.CalendarTypes.Month,d.monthVisible+"-01")},dateSelected:function(e){c.setMultilistValue(d.calendarTypeControl,s.Constants.CalendarTypes.Day);var t=e.date.getUTCFullYear()+"-"+c.padLeft(e.date.getUTCMonth()+1,"0",2)+"-"+c.padLeft(e.date.getUTCDate(),"0",2);r.getEvents(s.Constants.CalendarTypes.Day,t)},calendarTypeChanged:function(e){e.val()==s.Constants.CalendarTypes.Current&&d.calendarControl.datepicker("update",s.currentDate),r.getEvents()},filterListChanged:function(){r.getEvents()},pageClicked:function(){d.showPage(o(this).html())},subscribeCalendarChanged:function(e){var t=e.val();t=t.replace("https","webcal"),d.subscribeButton.attr("href",t)}}};return{Initialize:function(e,t,a,n,i){d.setup(e,t,a,n),i&&(i.ERROR_EVENT_INFORMATION&&(l.ERROR_EVENT_INFORMATION=i.ERROR_EVENT_INFORMATION),i.SHOW_MORE_EVENTS&&(l.SHOW_MORE_EVENTS=i.SHOW_MORE_EVENTS),i.NO_EVENTS_FOUND&&(l.ERROR_EVENT_INFORMATION=i.NO_EVENTS_FOUND)),s.calendars=d.calendarListControl.children().map(function(){return this.value}).get(),d.calendarListControl.children().each(function(){s.calendarItems[this.value]={key:o(this).data("key"),name:this.text}}),d.categoryListControl.children().each(function(){s.categoryItems[this.value]=this.text}),s.currentDate=c.getDatepickerValue(d.calendarControl),r.getEvents(c.getMultilistValue(d.calendarTypeControl),s.currentDate)}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.Feature=UAlberta.Sitecore.Feature||{},UAlberta.Sitecore.Feature.Carousel=UAlberta.Sitecore.Feature.Carousel||{GetInstance:function(){return n=jQuery,{Start:function(e,t,a){n("#"+e+".flexslider").flexslider({animation:"slide",selector:".slides > div.slide",pauseOnHover:t,randomize:a,slideshowSpeed:12e3,start:function(){UAlberta.lazyLoaderInstance&&UAlberta.lazyLoaderInstance.update()},after:function(){UAlberta.lazyLoaderInstance&&UAlberta.lazyLoaderInstance.update()}})}};var n}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.Feature=UAlberta.Sitecore.Feature||{},UAlberta.Sitecore.Feature.Tabbed=function(s){return{Initialize:function(){s(".slide").addClass("fma-slide").removeClass("slide");var e=s(".fma-container"),i=e.find(".fma-slide"),r=e.parent().find(".fma-tabs li");function o(){var e=0;return i.each(function(){e+=s(this).width()}),e}r.click(function(){return t(s(this).index()),!1}),i.click(function(){return t(s(this).index()),i.eq(index).hasClass("fma-active")}),r.hover(function(){a(s(this).index())},function(){a(s(this).index())}),i.hover(function(){a(s(this).index())},function(){a(s(this).index())}),o();var t=function(e){var t=i.eq(e).position().left,a=s(".fma-slide-wrapper").width(),n=0;return i.removeClass("fma-active"),i.eq(e).addClass("fma-active"),r.removeClass("fma-button-active"),r.eq(e).addClass("fma-button-active"),0==e?s(".fma-slide-scroller").css("left","0px"):(n=e==i.length-1?a-o():(a-i.eq(e).width())/2-t,s(".fma-slide-scroller").css("left",n+"px")),!1},a=function(e){return i.eq(e).toggleClass("fma-hover"),r.eq(e).toggleClass("fma-button-hover"),!1};t(0),UAlberta.lazyLoaderInstance&&UAlberta.lazyLoaderInstance.update()}}}(jQuery),function(c){c.fn.FilterableDataList=function(e){var s={id:"",settings:c.extend({categoryWrapper:"",classPrefix:"filterable-list",filterTextboxIconClass:"icon-filter",localization:{filterTextboxText:"filter items",noResultsText:"Sorry, there are no items matching your filter.",resultsCategoryText:"Filtered Items",displayText:"Displaying",displayAllText:"Displaying all",linksText:"links",itemsText:"items",matchesForText:"matches for",beginFilterText:"Begin typing to filter"}},e)},l={getNewRandomId:function(){var e="filteredDataList_"+Math.floor(1e3*Math.random()+1);return 0<c("#"+e).length?l.getNewRandomId():e}},t=function(e){var t=s.settings.categoryWrapper,a=s.settings.classPrefix,n=s.settings.filterTextboxIconClass,i=s.settings.localization.filterTextboxText,r=s.settings.localization.noResultsText,o=s.settings.localization.resultsCategoryText;""==e.attr("id")&&e.attr("id",l.getNewRandomId()),s.id=e.attr("id"),e.append('<li class="'+a+'-filter"><span class="'+a+'-label">'+o+'</span><i class="'+n+'"></i><input type="text" placeholder="'+i+'" class="'+a+'-filter-field" /><ul class="'+a+'-results"><li class="'+a+'-result-title"><'+t+"></"+t+'></li><li class="'+a+'-result-none"><p>'+r+"</p></li></ul></li>").children("li").addClass(a+"-category").each(function(){""!=t&&c(this).children("a").wrap("<"+t+"/>"),c(this).children("ul").addClass(a+"-items").not("."+a+"-results").addClass(a+"-searchable")}).first().addClass(a+"-active")},a=function(a){var n=s.settings.categoryWrapper,i=s.settings.classPrefix;a.find("."+i+"-category > "+(""==n?"a":n)+", ."+i+"-category input").click(function(){return a.find("."+i+"-category").removeClass(i+"-active"),c(this).parent().addClass(i+"-active"),!1}),a.find("."+i+"-result-title > "+(""==n?"a":n)).html(s.settings.localization.displayAllText+" "+a.find("."+i+"-searchable a").size()+" "+s.settings.localization.itemsText+". <small>"+s.settings.localization.beginFilterText+"...</small>"),a.find("."+i+"-searchable a").each(function(){a.find("."+i+"-results").append('<li class="'+i+'-result-item">'+c(this).parent().html()+"</li>")}),a.find("."+i+"-result-none").hide(),a.find("."+i+"-filter-field").search("#"+s.id+" ."+i+"-searchable a",function(e){e.all(function(e){var t=e?e.size():0;a.find("."+i+"-result-title > "+(""==n?"a":n)).html(s.settings.localization.displayText+" "+t+" "+s.settings.localization.matchesForText+" &quot;"+a.find("."+i+"-filter-field").val().replace(/>/g,"&gt;").replace(/</g,"&lt;")+"&quot")}),e.reset(function(){a.find("."+i+"-result-title > "+(""==n?"a":n)).html(s.settings.localization.displayAllText+" "+a.find("."+i+"-searchable a").size()+" "+s.settings.localization.linksText+". <small>"+s.settings.localization.beginFilterText+"...</small>"),a.find("."+i+"-result-item").remove(),a.find("."+i+"-searchable a").each(function(){a.find("."+i+"-results").append('<li class="'+i+'-result-item">'+c(this).parent().html()+"</li>")}),a.find("."+i+"-result-none").hide()}),e.empty(function(){a.find("."+i+"-result-none").show(),a.find("."+i+"-result-item").remove()}),e.results(function(e){a.find("."+i+"-result-none").hide(),a.find("."+i+"-result-item").remove(),e.each(function(){a.find("."+i+"-results").append('<li class="'+i+'-result-item">'+c(this).parent().html()+"</li>")})})})};return this.each(function(){t(c(this)),a(c(this))})}}(jQuery);var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.MediaGallery=UAlberta.Sitecore.MediaGallery||{GetInstance:function(){return function(l){"use strict";function u(){this.value=""}u.prototype.addValue=function(e,t){-1!=p.fieldsToShow.indexOf(e)&&0<t.length&&(this.value=this.value+(0<this.value.length?"<br />":"")+t)};var p={items:[],itemsPerPage:9,presetCategories:[],presetType:"",fieldsToShow:[],Constants:{MediaTypes:{Audio:"audio",Image:"image",Video:"video"}},Localization:{ERROR_ITEM_INFORMATION:"An error occurred while obtaining item information. Please refresh the page and try again.",NO_ITEMS_FOUND:"No Items Found",AUDIO_NOT_SUPPORTED_1:"Your browser does not support playing of this audio. Please",AUDIO_NOT_SUPPORTED_2:"the audio if you wish to listen to it.",DOWNLOAD:"download"}},c={getMultilistValue:function(e){return e.multiselect("getSelected").val()||[]},setMultilistValue:function(e,t){e.val(t),c.isMultilistCreated(e)&&e.multiselect("refresh")},isMultilistCreated:function(e){return 0<e.next().has(".multiselect-container.dropdown-menu").length},arrayIntersect:function(e,t){return l.map(e,function(e){return l.inArray(e,t)<0?null:e})}},d={getItems:function(e,t){h.showLoading(),d.currentRequest=l.ajax({error:d.Events.error,success:d.Events.success,url:"/api/mediagallery/folder/"+encodeURIComponent(e)+".json?orderby="+encodeURIComponent(t)})},Events:{error:function(){h.itemsControl.html("<p>"+p.Localization.ERROR_ITEM_INFORMATION+"</p>")},success:function(e){l(e).each(function(e,t){var a=0==p.presetCategories.length||0<c.arrayIntersect(l.map(t.Categories,function(e){return e.Key}),p.presetCategories).length,n=""==p.presetType||t.Type==p.presetType;a&&n&&(p.items[t.Id]=t)}),h.showItems()}}},h={containerId:"",categoryListControl:[],typeListControl:[],customListControl1:[],customListControl2:[],customListControl3:[],customListControl4:[],itemsControl:[],itemPagingControl:[],itemsVisible:[],loadingSelector:"",setup:function(e){h.containerId=e,h.categoryListControl=l("#"+h.containerId+" .media-filter-category select"),h.typeListControl=l("#"+h.containerId+" .media-filter-type select"),h.customListControl1=l("#"+h.containerId+" .media-filter-custom1 select"),h.customListControl2=l("#"+h.containerId+" .media-filter-custom2 select"),h.customListControl3=l("#"+h.containerId+" .media-filter-custom3 select"),h.customListControl4=l("#"+h.containerId+" .media-filter-custom4 select"),h.itemsControl=l("#"+h.containerId+" .gallery-container"),h.itemPagingControl=l("#"+h.containerId+" .events-pagination"),h.loadingSelector="#"+h.containerId+" .events-loading",""!=window.location.hash&&h.setDropdownsUsingHash(),h.categoryListControl.multiselect({buttonText:UAlberta.Sitecore.Utilities.MultiselectButtonText,onChange:function(){h.setHash(),h.Events.filtersChanged()}}),h.typeListControl.multiselect({buttonText:UAlberta.Sitecore.Utilities.MultiselectButtonText,onChange:function(){h.setHash(),h.Events.filtersChanged()}}),h.customListControl1.multiselect({buttonText:UAlberta.Sitecore.Utilities.MultiselectButtonText,onChange:function(){h.setHash(),h.Events.filtersChanged()}}),h.customListControl2.multiselect({buttonText:UAlberta.Sitecore.Utilities.MultiselectButtonText,onChange:function(){h.setHash(),h.Events.filtersChanged()}}),h.customListControl3.multiselect({buttonText:UAlberta.Sitecore.Utilities.MultiselectButtonText,onChange:function(){h.setHash(),h.Events.filtersChanged()}}),h.customListControl4.multiselect({buttonText:UAlberta.Sitecore.Utilities.MultiselectButtonText,onChange:function(){h.setHash(),h.Events.filtersChanged()}}),h.itemsControl.masonry({columnWidth:".gallery-item",itemSelector:".gallery-item",gutter:15,transitionDuration:0}),l(window).hashchange(function(){h.setDropdownsUsingHash(),h.showItems()})},showItems:function(){for(var e in h.itemsVisible.length=0,p.items){var t=p.items[e];null!=t.Id&&(t.DateFormatted=null==t.Date?"":t.DateFormatted||UAlberta.Sitecore.Utilities.GetDateFromJson(t.Date,UAlberta.Sitecore.Utilities.DateFormat.Short),null!=t.ThumbnailImageUrl&&0!=t.ThumbnailImageUrl.length||(t.ThumbnailImageUrl="/Design/img/"+t.Type+".png"),h.checkFilters(t)&&h.itemsVisible.push(t))}h.showPage(1)},showPaging:function(e){if(h.itemPagingControl.html(""),0!=h.itemsVisible.length){var t=parseInt(e),a=Math.ceil(h.itemsVisible.length/p.itemsPerPage);if(1!=a){for(var n=1;n<=a;n++)n==t?h.itemPagingControl.append('<li class="active">'+n+"</li>"):h.itemPagingControl.append('<li><a href="javascript:void(null)">'+n+"</a></li>");h.itemPagingControl.find("a").click(h.Events.pageClicked)}}},showPage:function(e){if(h.itemsControl.css("visibility","hidden"),h.itemsControl.html(""),0==h.itemsVisible.length)return h.itemsControl.html("<h4>"+p.Localization.NO_ITEMS_FOUND+"</h4>"),void h.showPaging(e);for(var t=(parseInt(e)-1)*p.itemsPerPage;t<p.itemsPerPage*e;t++){var a=h.itemsVisible[t];if(null!=a){var n=new u;n.addValue("caption",a.Caption),n.addValue("duration",a.Duration),n.addValue("attribution",a.Attribution);var i=-1!=p.fieldsToShow.indexOf("title")&&0<a.Title.length,r=-1!=p.fieldsToShow.indexOf("date")&&0<a.DateFormatted.length,o=0<n.value.length,s=0<a.Link.length?a.Link:"#",l=0==a.Link.length,c=a.AltText,d='<a href="'+s+'" class="extrude gallery-item"'+(l?'data-id="'+a.Id+'" data-target="#videoModal" data-toggle="modal"':"")+'><img alt="'+c+'" src="'+a.ThumbnailImageUrl+'"'+(i||o?"":' class="standalone"')+">"+(i||o?'<div class="gallery-description">'+(i?"<h3>"+a.Title+"</h3>":"")+(r?'<p class="date">'+a.DateFormatted+"</p>":"")+(o?'<p class="caption">'+n.value+"</p>":"")+"</div>":"")+"</a>";h.itemsControl.append(d)}}imagesLoaded(h.itemsControl[0],function(){h.itemsControl.masonry("reloadItems"),h.itemsControl.masonry(),h.itemsControl.css("visibility","visible")}),h.itemsControl.find("a[data-id]").click(h.Events.itemClicked),h.showPaging(e)},checkFilters:function(e){var t=c.getMultilistValue(h.categoryListControl),a=l.map(e.Categories,function(e){return e.Key});if(0<t.length&&0==c.arrayIntersect(t,a).length)return!1;var n=c.getMultilistValue(h.typeListControl);if(0<n.length&&l.inArray(e.Type,n)<0)return!1;var i=c.getMultilistValue(h.customListControl1);if(0<i.length&&0==c.arrayIntersect(i,e.CustomField1).length)return!1;var r=c.getMultilistValue(h.customListControl2);if(0<r.length&&0==c.arrayIntersect(r,e.CustomField2).length)return!1;var o=c.getMultilistValue(h.customListControl3);if(0<o.length&&0==c.arrayIntersect(o,e.CustomField3).length)return!1;var s=c.getMultilistValue(h.customListControl4);return!(0<s.length&&0==c.arrayIntersect(s,e.CustomField4).length)},showLoading:function(){0==l(h.loadingSelector).length&&h.itemsControl.append('<span class="loading"></span>')},setDropdownsUsingHash:function(){var t=[],a=[],n=[],i=[],r=[],o=[];l(window.location.hash.replace(/^#/,"").split("#")).each(function(){var e=this.split(";");switch(e.shift()){case"category":t=e;break;case"type":a=e;break;case h.customListControl1.siblings("h3").children().text().toLowerCase().replace(/\s/g,""):n=e;break;case h.customListControl2.siblings("h3").children().text().toLowerCase().replace(/\s/g,""):i=e;break;case h.customListControl3.siblings("h3").children().text().toLowerCase().replace(/\s/g,""):r=e;break;case h.customListControl4.siblings("h3").children().text().toLowerCase().replace(/\s/g,""):o=e}}),c.setMultilistValue(h.categoryListControl,t),c.setMultilistValue(h.typeListControl,a),c.setMultilistValue(h.customListControl1,n),c.setMultilistValue(h.customListControl2,i),c.setMultilistValue(h.customListControl3,r),c.setMultilistValue(h.customListControl4,o)},setHash:function(){var e="",t=c.getMultilistValue(h.categoryListControl).join(";");0<t.length&&(e+="#category;"+t);var a=c.getMultilistValue(h.typeListControl).join(";");0<a.length&&(e+="#type;"+a);var n=c.getMultilistValue(h.customListControl1).join(";");0<n.length&&(e+="#"+h.customListControl1.siblings("h3").children().text().toLowerCase().replace(/\s/g,"")+";"+n);var i=c.getMultilistValue(h.customListControl2).join(";");0<i.length&&(e+="#"+h.customListControl2.siblings("h3").children().text().toLowerCase().replace(/\s/g,"")+";"+i);var r=c.getMultilistValue(h.customListControl3).join(";");0<r.length&&(e+="#"+h.customListControl3.siblings("h3").children().text().toLowerCase().replace(/\s/g,"")+";"+r);var o=c.getMultilistValue(h.customListControl4).join(";");0<o.length&&(e+="#"+h.customListControl4.siblings("h3").children().text().toLowerCase().replace(/\s/g,"")+";"+o),window.location.hash=e},Events:{filtersChanged:function(){h.showItems()},pageClicked:function(){h.showPage(l(this).html())},itemClicked:function(){var e=p.items[l(this).data("id")];switch(l("#videoModal .modal-header h3").text(e.Title),e.Type){case p.Constants.MediaTypes.Audio:l("#videoModal .video-mod-container").hide();var t='<audio class="modal-audio" controls><source src="'+e.AudioUrlOgg+'" type="audio/ogg" /><source src="'+e.AudioUrlMp3+'" type="audio/mpeg" /><span>'+p.Localization.AUDIO_NOT_SUPPORTED_1+' <a href="'+e.AudioUrlMp3+'">'+p.Localization.DOWNLOAD+"</a> "+p.Localization.AUDIO_NOT_SUPPORTED_2+"</span></audio>";l("#videoModal .modal-body").append(t);break;case p.Constants.MediaTypes.Image:if(l("#videoModal .video-mod-container").hide(),0<e.ImageUrl.length){var a='<div class="modal-image'+(0==e.Description.length?" standalone":"")+'"><img src="'+e.ImageUrl+'" alt="'+e.Title+'" /></div>';l("#videoModal .modal-body").append(a)}break;case p.Constants.MediaTypes.Video:if(l(window).width()<690)return void(window.location=e.VideoUrlMobile);l("#videoModal iframe").attr("src",e.VideoUrl+"&autoplay=1")}0<e.Description.length&&l("#videoModal .modal-body").append("<div class='modal-description'>"+e.Description+"</div>")}}};return{Initialize:function(e,t,a,n,i,r,o,s){h.setup(e),p.itemsPerPage=a,p.presetCategories=0<n.length?n.split(";"):[],p.presetType=i,p.fieldsToShow=0<r.length?r.split(";"):[],s&&(s.ERROR_ITEM_INFORMATION&&(p.Localization.ERROR_ITEM_INFORMATION=s.ERROR_ITEM_INFORMATION),s.NO_ITEMS_FOUND&&(p.Localization.NO_ITEMS_FOUND=s.NO_ITEMS_FOUND),s.AUDIO_NOT_SUPPORTED_1&&(p.Localization.AUDIO_NOT_SUPPORTED_1=s.AUDIO_NOT_SUPPORTED_1),s.AUDIO_NOT_SUPPORTED_2&&(p.Localization.AUDIO_NOT_SUPPORTED_2=s.AUDIO_NOT_SUPPORTED_2),s.DOWNLOAD&&(p.Localization.DOWNLOAD=s.DOWNLOAD)),d.getItems(t,o)}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.News=UAlberta.Sitecore.News||{},UAlberta.Sitecore.News.Archive=function(s){var l={ServiceUrl:"",ItemsPerPage:10,NumberOfPages:1,PageLinksToShow:10,ActivePage:1,SearchTerm:"",Categories:"",StickySorting:!1},i={ERROR_NEWS_ARTICLES:"There was an error retrieving the news articles."},t="",a={pageChange:function(e){e!=l.ActivePage&&(o.getArticleData(e),a.updatePageSelection(e),l.ActivePage=e,s(".news-pagination > li").removeClass("active"),s("a[data-archive-page = '"+e+"']").parent().addClass("active"),r.updateHash(e))},updatePageSelection:function(e){if(l.NumberOfPages>l.PageLinksToShow){var t=e>=l.PageLinksToShow/2,a=e<=l.NumberOfPages-l.PageLinksToShow/2,n=l.PageLinksToShow;s(".news-pagination > li").addClass("hidden"),t&&(s(".news-pagination-break").first().removeClass("hidden"),s("a[data-archive-page = '1']").parent().removeClass("hidden"),n-=2),a&&(s(".news-pagination-break").last().removeClass("hidden"),s("a[data-archive-page = '"+l.NumberOfPages+"']").parent().removeClass("hidden"),n-=2);var i=e-n/2+1,r=i+n-1;i<=0?(i=1,r=n):i>=l.NumberOfPages-n&&(i=l.NumberOfPages-n,r=l.NumberOfPages);for(var o=i;o<=r;o++)s("a[data-archive-page = '"+o+"']").parent().removeClass("hidden")}}},n=function(){var e=document.location.search.substr(1).split("&"),t=encodeURI(s("#search").val());if(""==e)document.location.search="?search="+t;else{for(var a,n=e.length;n--;)if("search"==(a=e[n].split("="))[0]){a[1]=t,e[n]=a.join("=");break}n<0&&(e[e.length]=["search",t].join("=")),document.location.search=e.join("&")}},r={updateHash:function(e){t=window.location.hash,window.location.hash=e},back:function(){window.location.hash=window.location.hash==t?"":t},urlInit:function(){var e=window.location.hash.replace(/#/g,"");""!=e&&s(".news-pagination-item[data-archive-page = '"+e+"']").click()}},o={getArticleData:function(e){s.ajax({type:"GET",url:l.ServiceUrl+"?pagesize="+l.ItemsPerPage+"&page="+e+"&search="+l.SearchTerm+"&categories="+l.Categories+"&stickysorting="+l.StickySorting,dataType:"json",contentType:"application/json",timeout:1e3,success:o.ajaxSuccess,error:o.ajaxError})},ajaxSuccess:function(e){e=e||[];for(var t="",a=0;a<e.length;a++){var n="";""!=e[a].SImage&&(n='<div class="list-item-image frame"><img src="'+e[a].SImage+'" /></div>'),t+='<li><a href="'+e[a].Link+'">'+n+'<div class="list-item-content"><h4>'+e[a].Title+'</h4><p class="list-item-extra">'+e[a].Date+'</p><p class="list-item-description">'+e[a].Description+"</p></div></a></li>"}""==t&&(t="<li>"+i.ERROR_NEWS_ARTICLES+"</li>"),s(".news-archive-list").html(t)},ajaxError:function(){}};return{Initialise:function(e,t){l=s.extend(l,e),t&&t.ERROR_NEWS_ARTICLES&&(i.ERROR_NEWS_ARTICLES=t.ERROR_NEWS_ARTICLES),s(".news-pagination-item[data-archive-page]").click(function(){a.pageChange(s(this).attr("data-archive-page"))}),s(".news-pagination-item[data-archive-page]").parent().first().addClass("active"),s("#searchButton").click(function(e){e.preventDefault();var t=s("#search").val();""!=t&&t!=s("#search").attr("placeholder")&&n()}),s("#search").keydown(function(e){13!=(e=e||window.event).keyCode&&13!=e.which||(e.preventDefault(),s("#searchButton").click())}),s("#search").val(l.SearchTerm),r.urlInit()}}}(jQuery);var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.News=UAlberta.Sitecore.News||{},UAlberta.Sitecore.News.Article=function(t){return{Initialise:function(){var e=t(".image-caption-container:first img");e.length&&t("<img/>").attr("src",t(e).attr("src").split("?")[0]).load(function(){this.width<350&&t(".frame").css({float:"right",width:"50%","margin-left":"1em"})});var a=t("#top-stories");t.getJSON("/api/news/headlines.jsonp?callback=?",function(e){a.removeClass("loading");for(var t=0;t<e.length;t++)a.append('<li class="news-row"><a href="'+e[t].Link+'">'+e[t].Title+"</a></li>")}),t(".story iframe").css("width","100%")}}}(jQuery);var UAlberta=UAlberta||{};function Dictionary(){this.keys=new Array,this.data=new Array}UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.SearchGraduateProgram=function(d){var u=new Dictionary,o=new Dictionary,t="",e=null,p={NO_RESULTS_FOUND:"No Results Found"},s={getFlatTextValue:function(e){var t="";for(var a in e)if(e.hasOwnProperty(a))if("object"==typeof e[a])t+=" "+s.getFlatTextValue(e[a]);else{if("{"==e[a][0]&&"}"==e[a][e[a].length-1])continue;t+=" "+e[a].replace(/\n/g," ").toLowerCase()}return t}},a={getData:function(t){d.getJSON("/api/gradprograms",function(e){a.ajaxSuccess(e),t()})},ajaxSuccess:function(e){if(e&&0<e.length){for(var t=0;t<e.length;t++){var a=e[t],n=a.Department||"",i=a.Faculties||[];u.containsKey(n)||(a._FullText=s.getFlatTextValue(a),u.add(n,a));for(var r=0;r<i.length;r++)o.containsKey(i[r].Name)||o.add(i[r].Name,i[r])}l.populateFacultyDropDown(),u.sortKeys(),o.sortKeys()}},ajaxError:function(){}},n={urlType:{Main:1,Details:2},parseUrl:function(){var e=window.location.hash;return""!=e?{urlType:n.urlType.Details,value:e}:{urlType:n.urlType.Main,value:""}},urlChange:function(){switch((e=n.parseUrl()).urlType){case n.urlType.Main:d("#gradDetailsWrapper").slideUp(500,function(){d("#gradSearchWrapper,#search-instructions").slideDown(500),i.displayResults()});break;case n.urlType.Details:d("#gradSearchWrapper,#search-instructions").slideUp(500,function(){d("#gradDetailsWrapper").slideDown(500),r.displayDetails(e)})}},updateHash:function(e){window.location.hash=e}},l={populateFacultyDropDown:function(){for(var e=d("#sFacultyList"),t=0;t<o.length();t++){var a=o.lookup(o.lookupKey(t));e.append("<option value='"+a.Id+"'>"+a.Name+"</option>")}e.change(function(){i.displayResults()})}},i={displayResults:function(){var e=[],t=d("#sFacultyList").val(),a=d.grep(d("#gradSearchBox").val().trim().toLowerCase().split(" "),function(e){return e});e:for(var n=0;n<u.length();n++){var i,r=u.lookupKey(n),o=u.lookup(r),s="",l="";if(0<a.length)for(i=0;i<a.length;i++)if(-1==o._FullText.indexOf(a[i]))continue e;for(i=0;i<o.Faculties.length;i++)""!=t&&t!=o.Faculties[i].Id||(""!=l&&(l+="<br/>"),l+=o.Faculties[i].Name);if(""!=l){for(i=0;i<o.Degrees.length;i++)""!=s&&(s+=", "),s+=o.Degrees[i].Abbreviation;e.push({Department:o.Department,Degrees:s,Faculty:l,hash:o.Id.replace(/-|{|}/g,"")})}}var c=d("#gradResultsTable > tbody");c.empty();for(n=0;n<e.length;n++)c.append("<tr><td><a href='javascript:void(0);' onclick='UAlberta.Sitecore.SearchGraduateProgram.updateHash(\"#"+e[n].hash+"\");'>"+e[n].Department+"</a></td><td>"+e[n].Degrees+"</td><td>"+e[n].Faculty+"</td></tr>");0==e.length&&c.append("<tr><td colspan='3'>"+p.NO_RESULTS_FOUND+".</td></tr>")}},r={displayDetails:function(e){var t,a=e.value.replace("#",""),n=null,i="",r="";for(t=0;t<u.length();t++){var o=u.lookupKey(t),s=u.lookup(o);if(s.Id.replace(/-|{|}/g,"")==a){n=s;break}}for(t=0;t<n.Degrees.length;t++)r+="<li>"+n.Degrees[t].Name+"</li>";for(t=0;t<n.Faculties.length;t++)""!=i&&(i+="<br/>"),i+=n.Faculties[t].Name;d("#gradDetail_department").html(n.Department),d("#gradDetail_faculty").html(i),d("#gradDetail_website").html(n.ProgramUrl).attr("href",n.ProgramUrl),d("#gradDetail_email").html(n.Email).attr("href","mailto:"+n.Email),d("#gradDetail_research").html(n.ResearchAreas),d("#gradDetail_degrees").html(r),""!=n.GraduateSudentPositionsUrl?d("#gradDetail_studentPos").html(n.GraduateSudentPositionsUrl).attr("href",n.GraduateSudentPositionsUrl).parent().show():d("#gradDetail_studentPos").parent().hide()}};return{initialize:function(e){e&&e.NO_RESULTS_FOUND&&(p.NO_RESULTS_FOUND=e.NO_RESULTS_FOUND),d("#gradSearchWrapper,#search-instructions").show(),jQuery.easing.def="easeInCubic",-1!=window.location.hash.indexOf("search_")&&(d("#gradSearchBox").val(window.location.hash.replace(/^[#]?search_/g,"")),n.updateHash("")),a.getData(n.urlChange),"onhashchange"in window&&(void 0===document.documentMode||7<document.documentMode)?d(window).bind("hashchange",function(e){n.urlChange()}):setInterval(function(){var e=window.location.hash;t!==e&&(t=e,n.urlChange())},50),d("#gradSearchBox").keyup(function(e){13!=(e=e||window.event).keyCode&&13!=e.which?i.displayResults():e.preventDefault()})},updateHash:n.updateHash}}(jQuery),window.Dictionary=Dictionary,Dictionary.prototype.add=function(){for(var e=0;e<arguments.length;e+=2)this.data[arguments[e]]=arguments[e+1],this.keys[this.keys.length]=arguments[e]},Dictionary.prototype.lookup=function(e){return this.data[e]},Dictionary.prototype.length=function(){return this.keys.length},Dictionary.prototype.lookupKey=function(e){return this.keys[e]},Dictionary.prototype.containsKey=function(e){return!!(-1<this.keys.indexOf(e))},Dictionary.prototype.sortKeys=function(){this.keys.sort()};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.TeaserDataList=UAlberta.Sitecore.TeaserDataList||{GetInstance:function(){return function(d){"use strict";var u={options:{isInSidebar:!1,cssClassPrefix:"",showDescriptions:!1,showDate:!1,showImages:!1,showSource:!1,displayLimit:5,emptyListText:""}},i={ERROR_ITEM_INFORMATION:"An error occurred while obtaining item information. Please refresh the page and try again."},r={getItems:function(e){d.ajax({cache:!1,dataType:"json",error:r.Events.error,success:r.Events.success,url:"https://api.ualberta.cloud/news?feed="+encodeURIComponent(e)})},Events:{error:function(){p.itemList.find(".loading").remove(),p.itemList.prepend("<li><p>"+i.ERROR_ITEM_INFORMATION+"</p></li>")},success:function(e){p.showItems(e.Items)}}},p={itemList:[],setup:function(e){p.itemList=d("#"+e+" > ul")},showItems:function(e){p.itemList.find(".loading").remove();var t=p.itemList.find(".bottom-row"),a=d(t).clone().wrap("<p>").parent().html();if(t.remove(),0==e.length){var n='<div class="list-item-content">';n+=u.options.emptyListText,n+="</div>",p.itemList.append(n)}else for(var i=0;i<e.length&&!(i>=u.options.displayLimit);i++)p.addItem(e[i]);p.itemList.append(a)},addItem:function(e){if(""!=e.Title.Content){var t='<div class="list-item-content">';if(t+="<h4>"+e.Title.Content+"</h4>",u.options.showDate&&(t+='<p class="list-item-extra">'+p.getDate(e)+"</p>"),u.options.showSource&&null!=e.SourceFeed&&null!=e.SourceFeed.Title&&null!=e.SourceFeed.Title.Content){var a=e.SourceFeed.Title.Content;null!=e.SourceFeed.Links&&0<e.SourceFeed.Links.length&&(a='<a href="'+e.SourceFeed.Links[0].Uri+'">'+a+"</a>"),t+='<p class="list-item-extra">'+a+"</p>"}if(u.options.showDescriptions&&(null!=e.Summary.Content||null!=e.Content.Content)){var n=null!=e.Summary.Content?e.Summary.Content:e.Content.Content,i=document.createElement("DIV");i.innerHTML=n,d(i).find("a").contents().unwrap(),t+='<p class="list-item-description">'+i.innerHTML+"</p>"}t+="</div>";var r="",o="";if(u.options.showImages)for(var s=0;s<e.Links.length;s++){var l;null!=(l=e.Links[s]).MediaType&&-1!==l.MediaType.toLowerCase().indexOf("image")&&(o='<div class="list-item-image frame"><img alt="" src="'+l.Uri+'" /></div>')}r=""!=(l=p.getLink(e))?'<a href="'+p.getLink(e)+'">'+o+t+"</a>":o+t;var c="";""!=u.options.cssClassPrefix&&(c+=u.options.cssClassPrefix+"-row"),""==l&&(c+=" list-content-item"),p.itemList.append("<li"+(""==c?"":' class="'+c.trim()+'"')+">"+r+"</li>")}},getLink:function(e){if(e.Links&&0<e.Links.length){for(var t=0;t<e.Links.length;t++){var a=e.Links[t];if(null!=a.RelationshipType&&"alternate"==a.RelationshipType.toLowerCase())return a.Uri}return e.Links[0].Uri}return""},getDate:function(e){return null!=e.GoogleCalendarWhen?e.GoogleCalendarWhen:UAlberta.Sitecore.Utilities.GetDateFromJson(e.PublishDate,UAlberta.Sitecore.Utilities.DateFormat.Short)}};return{Initialize:function(e,t,a,n){u.options=d.extend(u.options,a),n&&n.ERROR_ITEM_INFORMATION&&(i.ERROR_ITEM_INFORMATION=n.ERROR_ITEM_INFORMATION),p.setup(e),r.getItems(t)}}}(jQuery)}},function(t){t(document).ready(function(){0==t("#videoModal").length&&t("#mainform").append("<div id='videoModal' class='modal hide fade'><div class='modal-header'><button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button><h3>Video Modal</h3></div><div class='modal-body'><div class='video-mod-container'><iframe type='text/html' src='' frameborder='0'></iframe></div></div></div>"),t(document).on("click",".video-modal-link",function(){var e=t(this).attr("href");t(window).width()<690?window.location=t(this).attr("data-mobileurl"):(t("#videoModal iframe").attr("src",e),t("#videoModal .modal-header h3").text(t(this).data("title")))}),t("#videoModal").bind("hidden",function(){t("#videoModal iframe").attr("src",""),t("#videoModal .video-mod-container").show(),t("#videoModal .modal-description").remove(),t("#videoModal .modal-audio").remove(),t("#videoModal .modal-image").remove()})})}(jQuery);var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.WebServiceContent=UAlberta.Sitecore.WebServiceContent||{GetInstance:function(){return function(t){"use strict";var n={ERROR_LOADING_CONTENT:"An error occurred while loading this content. Please refresh the page and try again."},i={getContent:function(e){t.ajax({dataType:"jsonp",error:i.Events.error,success:i.Events.success,url:e})},Events:{error:function(){r.showContent("<p>"+n.ERROR_LOADING_CONTENT+"</p>")},success:function(e){r.showContent(e)}}},r={container:[],loadingSelector:"",setup:function(e){r.container=t("#"+e)},showContent:function(e){r.container.html(e)}};return{Initialize:function(e,t,a){n&&a.ERROR_LOADING_CONTENT&&(n.ERROR_LOADING_CONTENT=a.ERROR_LOADING_CONTENT),r.setup(e),i.getContent(t)}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.PersonLayout=function(n){return{Initialize:function(t){(t=t||{}).SHOW_NAVIGATION||(t.SHOW_NAVIGATION="Show Navigation"),t.HIDE_NAVIGATION||(t.HIDE_NAVIGATION="HIDE Navigation"),n(".people-section-nav .navigation-toggle").on("click",function(e){return n(this).toggleClass("collapsed"),n(".people-nav-cont").toggle(),n(".people-section-nav .navigation-toggle span").html(n(this).hasClass("collapsed")?t.SHOW_NAVIGATION:t.HIDE_NAVIGATION),e.stopPropagation(),!1});var a=n(".people-nav li");a.click(function(){return e(n(this).index()),!1});var e=function(e){switch(a.removeClass("active"),a.eq(e).addClass("active"),n(".person-section").hide(),e){case 1:n(".ph-person-courses").show();break;case 2:n(".ph-person-activities").show();break;case 3:n(".ph-person-publications").show();break;case 4:n(".ph-person-labs").show();break;default:n(".ph-person-home").show()}return!1};e(0)}}}(jQuery);var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.PersonProfile=UAlberta.Sitecore.PersonProfile||function(){function getInstance(){return function($){"use strict";var Data={items:[],itemsPerPage:10,Constants:{Modules:{Publications:"Publications",Courses:"Courses",Scholarly:"Scholarly"}},Localization:{ERROR_LOADING_CONTENT:"An error occurred while loading this content. Please refresh the page and try again.",DOCUMENT:"Document"}},AJAX={getContent:function(e){$.ajax({dataType:"json",url:e,error:AJAX.Events.error,success:function(e){AJAX.Events.success(e)}})},Events:{error:function(e,t,a){Interface.showContent("<p>"+Data.Localization.ERROR_LOADING_CONTENT+"<br>Error: "+a.text+"</p>")},success:function(e){Data.items=e,Interface.showItems()}}},Interface={module:"",itemsControl:[],itemsPagingControl:[],itemsVisible:[],setup:function(e,t){Interface.module=t,Interface.itemsControl=$("#"+e+" #control-items"),Interface.itemsPagingControl=$("#"+e+" .events-pagination")},showItems:function(){if(Interface.itemsControl.find("li:first").remove(),0!=Data.items.length&&0!=Data.items[0].Items){if(Interface.module==Data.Constants.Modules.Publications){Interface.itemsVisible.length=0;var o=function(e,t){return t<e?1:e<t?-1:0};for(var e in Data.items[0].Items.sort(function(e,t){var a=e.Fields["Display this publication at the top of the list"],n=t.Fields["Display this publication at the top of the list"],i=Date.parse(6==e.Date.length?e.Date.insert(4,0,"-"):8==e.Date.length?e.Date.insert(4,0,"-").insert(7,0,"-"):e.Date),r=Date.parse(6==t.Date.length?t.Date.insert(4,0,"-"):8==t.Date.length?t.Date.insert(4,0,"-").insert(7,0,"-"):t.Date);return o(n,a)||o(r,i)}),Data.items[0].Items){var t=Data.items[0].Items[e];null!=t.Id&&Interface.itemsVisible.push(t)}}Interface.showPage(1)}else $("#nav"+Interface.module).hide()},renderItems:function(e,t){var a="";a+=t?"<li><ul class='people-accordion-content'>":"<li><ul>";var n="",i=["Term","Type","Category","Display this publication at the top of the list","Lab Title"],r=["Instructor","Coordinator"],o=["Lab Description","Cover Picture","Contact"];for(var s in e.Fields)if(""!=e.Fields[s]&&-1==i.indexOf(s)){if(-1<o.indexOf(s)){-1<s.toLowerCase().indexOf("contact")&&(a+="<li> <strong> "+Data.Localization.INTERESTED_IN_OUR_RESEARCH+":</strong></li>"),a+="<li>"+e.Fields[s]+"</li>";continue}if(-1<s.toLowerCase().indexOf("title")){var l="";"1"===e.Fields["Display this publication at the top of the list"]&&(l='<i class="icon-thumb-tack" title="Pinned Item"></i> '),a+="<li><h5>"+l+e.Fields[s]+"</h5></li>"}else if(-1<r.indexOf(s))a+="<li><strong>"+Interface.localizeFieldName(s)+"</strong></li>";else if(-1<s.toLowerCase().indexOf("documents and images")){var c=Interface.getKeyLinkList(e.Fields[s]);""!=c&&(a+="<li><strong>"+Interface.localizeFieldName(s)+": </strong></li>"+c)}else if(e.Fields[s])if(e.Fields[s].length<25&&(Interface.isValidDate(e.Fields[s])||-1!=s.toLowerCase().indexOf("date"))){var d=6==e.Fields[s].length?e.Fields[s].insert(4,0,"-"):8==e.Fields[s].length?e.Fields[s].insert(4,0,"-").insert(7,0,"-"):e.Fields[s].substr(0,10);-1!=s.toLowerCase().indexOf("start")||-1!=s.toLowerCase().indexOf("end")?-1!=s.toLowerCase().indexOf("start")?n=d:-1!=s.toLowerCase().indexOf("end")&&(""==n?n='"'+d:n+=" to "+d,a+="<li>"+n.toString("MMMM d, yyyy")+"</li>"):a+="<li><strong>"+Interface.localizeFieldName(s)+": </strong>"+d+"</li>"}else if(-1<s.toLowerCase().indexOf("author"))a+="<li><strong>"+Interface.localizeFieldName(s)+"(s): </strong>"+e.Fields[s]+"</li>";else if(-1!=s.indexOf("Link")){var u="<a href='"+e.Fields[s]+"' target='_blank'>"+e.Fields[s]+"</a>";a+="<li><strong>"+Interface.localizeFieldName(s)+": </strong>"+u+"</li>"}else-1!=s.toLowerCase().indexOf("description")&&Interface.module==Data.Constants.Modules.Publications?a+="<li><div class='publication-description'><strong>"+Interface.localizeFieldName(s)+": </strong>"+e.Fields[s]+"</div></li>":a+="<li><strong>"+Interface.localizeFieldName(s)+": </strong>"+e.Fields[s]+"</li>"}return a+="</ul></li>"},showPage:function(e){var t;Interface.itemsControl.html("");var a="<ul class='accordion-list'>";for(var n in Data.items){var i=Data.items[n];if(0!=i.Items){if((t="Items"!=i.Name)?(a+="<li>",a+="<a>"+Interface.localizeFieldName(i.Name)+"</a>",a+="<a class='accordion-toggle icon-plus'></a>",a+="<ul class='people-accordion'>"):a="<ul class='people-content'>",Interface.module==Data.Constants.Modules.Publications)for(var r=(parseInt(e)-1)*Data.itemsPerPage;r<Data.itemsPerPage*e;r++)null!=i.Items[r]&&(a+=Interface.renderItems(i.Items[r],t));else for(var o in i.Items)null!=i.Items[o]&&(a+=Interface.renderItems(i.Items[o],t));a+=t?"</ul></li>":"</ul>"}}Interface.itemsControl.append(a),Interface.itemsControl.find(".accordion-list li:first-child").toggleClass("expanded"),Interface.itemsControl.find(".accordion-toggle").click(function(){return $(this).parent().toggleClass("expanded"),!1}),Interface.itemsControl.find(".publication-description").shorten({showChars:75,moreText:"read more",lessText:"read less"}),$(".people-section-nav").show(),$(".people-nav-cont").show(),Interface.showPaging(e)},showPaging:function(e){if(0!=Interface.itemsVisible.length){for(var t="",a=parseInt(e),n=Math.ceil(Interface.itemsVisible.length/Data.itemsPerPage),i=1;i<=n;i++)t+=i==a?'<li class="active">'+i+"</li>":'<li><a href="javascript:void(null)">'+i+"</a></li>";Interface.itemsPagingControl.html(""),Interface.itemsPagingControl.append(t),Interface.itemsPagingControl.find("a").click(Interface.pageClicked)}},pageClicked:function(){Interface.showPage($(this).html())},insert:String.prototype.insert=function(e,t,a){return this.slice(0,e)+a+this.slice(e+Math.abs(t))},isValidDate:function(e){var t,a,n;if(null==e||e.length<8)return!1;var i=e.substring(0,10).match(/^(\d{4})([\/-])?(\d{1,2})\2?(\d{1,2})$/);if(null==i)return!1;if(n=i[1],a=i[3],t=i[4],a<1||12<a)return!1;if(t<1||31<t)return!1;if((4==a||6==a||9==a||11==a)&&31==t)return!1;if(2==a&&(29<t||29==t&&!(n%4==0&&(n%100!=0||n%400==0))))return!1;return!0},getKeyLinkList:function(arrays){var links=arrays.split("|"),regex=/^\{\w{8}-\w{4}-\w{4}-\w{4}-\w{12}\}$/,htmlLinks="";for(var item in links){var itemId=links[item].replace(/\W/g,"");if(regex.test(links[item]))htmlLinks+="<li><a href='/-/media/"+itemId+"' target = '_blank' >"+Data.Localization.DOCUMENT+"</a></li>";else{var linksArray=eval("("+links[item]+")");htmlLinks+="<li><a href='"+linksArray.URL+"' target = '_blank' >"+linksArray.Title+"</a></li>"}}return htmlLinks},error:function(){console.log(content)},localizeFieldName:function(e){var t=e.replace(/ /g,"_").toUpperCase();return Data.Localization.hasOwnProperty(t)&&Data.Localization[t]?Data.Localization[t]:e}};function init(e,t,a,n){$.extend(Data.Localization,n),Interface.setup(e,a),AJAX.getContent(t)}return{Initialize:init}}(jQuery)}return{GetInstance:getInstance}}(),function(h){h.fn.shorten=function(e){"use strict";var p={showChars:100,ellipsesText:"...",moreText:"more",lessText:"less",errMsg:null,force:!1};return e&&h.extend(p,e),!(h(this).data("jquery.shorten")&&!p.force)&&(h(this).data("jquery.shorten",!0),h(document).off("click",".morelink"),h(document).on({click:function(){var e=h(this);return e.hasClass("less")?(e.removeClass("less"),e.html(p.moreText),e.parent().prev().prev().show(),e.parent().prev().hide()):(e.addClass("less"),e.html(p.lessText),e.parent().prev().prev().hide(),e.parent().prev().show()),!1}},".morelink"),this.each(function(){var e=h(this),t=e.html();if(e.text().length>p.showChars){var a=t.substr(0,p.showChars);if(0<=a.indexOf("<")){for(var n=!1,i="",r=0,o=[],s=null,l=0,c=0;c<=p.showChars;l++)if("<"!=t[l]||n||(n=!0,"/"==(s=t.substring(l+1,t.indexOf(">",l)))[0]?s!="/"+o[0]?p.errMsg="ERROR en HTML: the top of the stack should be the tag that closes":o.shift():"br"!=s.toLowerCase()&&o.unshift(s)),n&&">"==t[l]&&(n=!1),n)i+=t.charAt(l);else if(c++,r<=p.showChars)i+=t.charAt(l),r++;else if(0<o.length){for(var d=0;d<o.length;d++)i+="</"+o[d]+">";break}a=h("<div/>").html(i+'<span class="ellip">'+p.ellipsesText+"</span>").html()}else a+=p.ellipsesText;var u='<div class="shortcontent">'+a+'</div><div class="allcontent">'+t+'</div><span><a href="javascript://nop/" class="morelink">'+p.moreText+"</a></span>";e.html(u),e.find(".allcontent").hide(),h(".shortcontent p:last",e).css("margin-bottom",0)}}))}}(jQuery);var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.HomePage=UAlberta.Sitecore.HomePage||{},UAlberta.Sitecore.HomePage.FeatureMessagingArea=UAlberta.Sitecore.HomePage.FeatureMessagingArea||{Start:function(){var e=$(".slides li.current"),t=$("ul.toggles li.current"),a=setInterval(function(){e.removeClass("current"),t.removeClass("current"),t=0<e.next("li").length?(e=e.next("li"),t.next("li")):(e=e.parent().find("li:first"),t.parent().find("li:first")),e.addClass("current"),t.addClass("current")},8e3);$("ul.toggles li").on("click",function(){$(".slides li").removeClass("current"),$("ul.toggles li").removeClass("current"),$(this).addClass("current"),$(".slides > li").eq($(this).index()).addClass("current"),clearInterval(a)})}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.ResearchProjectList=UAlberta.Sitecore.ResearchProjectList||{GetInstance:function(){return function(l){"use strict";var c,d={ProjectsPerPage:10},u={BY:"By",PRINCIPAL_INVESTIGATOR:"Principal Investigator",KEYWORDS:"Keywords",NO_RESULTS_FOUND:"No results found",ERROR_LOADING_CONTENT:"An error occurred while loading this content. Please refresh the page and try again."},e=function(e){return e.split("&").reduce(function(e,t){var a=t.split("=").map(function(e){return decodeURIComponent(e.replace(/\+/g," "))});return e[a[0]]=a[1],e},{})},r={currentRequest:void 0,getProjects:function(e,t,a,n,i){null!=r.currentRequest&&r.currentRequest.abort(),r.currentRequest=l.ajax({contentType:"application/json; charset=utf-8",data:{faculty:e,area:t,subareas:a.join("|"),search:n.split(" ").join("|")},dataType:"json",error:function(){r.Events.error(i)},success:function(e){r.Events.success(e,i)},url:"/api/research.json"})},getSubAreas:function(e,t){0!=e.length?l.ajax({contentType:"application/json; charset=utf-8",dataType:"json",error:r.Events.error,success:function(e){t(e)},url:"/api/research/areas/"+e+".json"}):t([])},Events:{error:function(e){e(),r.currentRequest=void 0},success:function(e,t){t(e),r.currentRequest=void 0}}},p={containerId:"",loading:[],projectListContainer:[],projectList:[],areaDropdown:[],subAreaDropdown:[],facultyDropdown:[],searchBox:[],searchButton:[],searchReset:[],messageContainer:[],paginationContainer:[],page:1,setup:function(e){p.container=l("#"+e),p.loading=p.container.find(".loading"),p.projectList=p.container.find(".research-area > ul"),p.projectListContainer=p.projectList.parent(),p.areaDropdown=p.container.find(".research-area select"),p.subAreaDropdown=p.container.find(".sub-research-area select"),p.facultyDropdown=p.container.find(".faculty-search select"),p.searchBox=p.container.find("input[type=text]"),p.searchButton=p.container.find("input[type=button]").first(),p.searchReset=p.searchButton.next(),p.messageContainer=p.container.find(".messages"),p.paginationContainer=p.container.find(".events-pagination"),p.areaDropdown.change(function(){p.subAreaDropdown.html(""),p.subAreaDropdown.multiselect("rebuild"),p.filterCheckReset()||(p.page=1,p.showSubAreas(l(this).val()),p.getProjects())}),p.subAreaDropdown.multiselect({nonSelectedText:"",nSelectedText:UAlberta.Sitecore.Localization.SELECTED,onChange:function(){p.page=1,p.getProjects()}}),p.facultyDropdown.change(function(){p.page=1,p.getProjects()}),p.searchBox.keypress(function(e){13==e.which&&(e.preventDefault(),p.page=1,p.getProjects())}),p.searchButton.click(function(){p.page=1,p.getProjects()}),p.searchReset.click(function(){p.searchBox.val(""),p.page=1,p.getProjects()})},getProjects:function(){p.filterCheckReset()||(p.projectList.html(""),p.toggleLoading(!0),r.getProjects(p.facultyDropdown.val(),p.areaDropdown.val(),p.subAreaDropdown.multiselect("getSelected").val()||[],p.searchBox.val(),p.showProjects),p.setUrl())},showSubAreas:function(e,a){r.getSubAreas(e,function(e){if(0!=e.length){for(var t in e)p.subAreaDropdown.append("<option value='"+e[t].Id+"'>"+e[t].Name+"</option>");p.subAreaDropdown.multiselect("rebuild"),"function"==typeof a&&a()}})},showProjects:function(e){if(p.toggleLoading(!1),p.projectListContainer.toggle(null!=e&&0<e.length),null!=e){for(var t in p.messageContainer.html(0==e.length?u.NO_RESULTS_FOUND:""),p.messageContainer.toggle(0==e.length),e.sort(function(e,t){var a=e.Title.toLowerCase(),n=t.Title.toLowerCase();return a<n?-1:n<a?1:0}),e){var a=e[t],n=l.map(a.Faculties,function(e){return c?e.Name:"<a href='?faculty="+encodeURIComponent(e.Name).replace(/%20/g,"+")+"' data-id='"+e.Id+"'>"+e.Name+"</a>"}),i=n.length?"<li class='faculties'><strong>"+u.BY+":</strong> "+n.join(", ")+"</li>":"",r="";a.PrincipleInvestigator&&(r=a.PrincipleInvestigator.Name,a.PrincipleInvestigator.Url&&(r="<a href='"+a.PrincipleInvestigator.Url+"'>"+r+"</a>"),r="<li><strong>"+u.PRINCIPAL_INVESTIGATOR+":</strong> "+r+"</li>");var o=l.map(a.Keywords,function(e){return"<a href='?search="+encodeURIComponent(e).replace(/%20/g,"+")+"'>"+e+"</a>"}),s=o.length?"<li class='keywords'><strong>"+u.KEYWORDS+":</strong> "+o.join(", ")+"</li>":"";p.projectList.append("<li style='display: none'><ul><li><h4><a href='"+a.Url+"'>"+a.Title+"</a></h4></li>"+i+"<li>"+a.Description+"</li>"+r+s+"</ul></li>")}p.showPagination(Math.ceil(e.length/d.ProjectsPerPage)),p.showPage()}else p.messageContainer.html(u.ERROR_LOADING_CONTENT)},showPagination:function(e){if(p.paginationContainer.off("click","a"),p.paginationContainer.html(""),0!==e&&(e=e||p.paginationContainer.data("pages"),p.paginationContainer.data("pages",e),1!==e)){var t=s.parse();delete t.page,t=l.param(t);for(var a=1;a<=e;a++)if(a==p.page)p.paginationContainer.append("<li class='active'>"+a+"</li>");else{var n=1==a?"":"&page="+a;p.paginationContainer.append("<li><a href='?"+t+n+"'>"+a+"</a></li>")}p.paginationContainer.on("click","a",function(e){e.preventDefault(),p.page=parseInt(l(this).text(),10),p.setUrl(),p.showPage()})}},showPage:function(){p.projectList.children().hide(),p.projectList.children().slice((p.page-1)*d.ProjectsPerPage,p.page*d.ProjectsPerPage).show(),p.showPagination()},filterCheckReset:function(){return!(p.facultyDropdown.val()||p.areaDropdown.val()||p.searchBox.val()||(p.projectListContainer.hide(),p.paginationContainer.off("click","a"),p.projectList.html(""),p.paginationContainer.html(""),p.messageContainer.html(""),p.messageContainer.hide(),p.setUrl(),0))},setUrl:function(){var e=p.subAreaDropdown.children(":selected").map(function(){return l(this).text()}).get();s.set(p.facultyDropdown.find("option:selected").text(),p.areaDropdown.find("option:selected").text(),e,p.searchBox.val(),p.page)},usePresets:function(e){var t=!1;if(p.page=e.page||1,e.faculty){var a=p.facultyDropdown.find("option").filter(function(){return l(this).text()==e.faculty}).val();p.facultyDropdown.val(a)}e.search&&p.searchBox.val(e.search);var n=""!=p.areaDropdown.val();if(e.area){var i=p.areaDropdown.find("option").filter(function(){return l(this).text()==e.area}).val();p.areaDropdown.val(i),n=!0}n&&(t=e.subareas&&0<e.subareas.length,p.showSubAreas(p.areaDropdown.val(),t?function(){p.subAreaDropdown.children().filter(function(){return 0<=e.subareas.split("|").indexOf(l(this).text())}).attr("selected","selected"),p.subAreaDropdown.multiselect("rebuild"),p.getProjects()}:null)),t||p.getProjects()},toggleLoading:function(e){p.loading.toggle(e)}},s={active:!1,parse:function(){return e(window.location.search.substring(1))},set:function(e,t,a,n,i){if(s.active){var r={faculty:e,area:t,subareas:(a||[]).join("|"),search:n,page:1==i?null:i};for(var o in r)r[o]&&0!==r[o].length||delete r[o];window.history.location||window.location,history.replaceState(null,null,"?"+l.param(r))}}};return{Initialize:function(e,t,a,n){s.active=!t,c="true"===n.toLowerCase(),l.extend(u,a),p.setup(e),p.usePresets(s.parse())}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.ResearchProject=UAlberta.Sitecore.ResearchProject||{GetInstance:function(){return function(a){"use strict";var t=function(e){var t=a("#"+e);t.on("click",".navigation-toggle",function(e){e.preventDefault(),a(this).toggleClass("collapsed"),a(this).children("span").toggle(),t.find(".people-nav").toggle()}),t.on("click","ul.people-nav.rengage a",function(e){e.preventDefault(),t.find("ul.people-nav.rengage a").parent().removeClass("active"),a(this).parent().addClass("active"),t.find(".rengage-content > div").hide(),t.find(".rengage-content > div."+a(this).data("target")).show()}),t.on("click",".morelink",function(e){e.preventDefault();var t=a(this).closest(".shortcontent");t.hide(),t.siblings(".allcontent").show()}),t.on("click",".rengage-gallery a",function(){a("#videoModal .modal-header h3").html(a(this).closest("li").find("h4").html()),a("#videoModal .video-mod-container").hide(),a("#videoModal .modal-body").append('<div class="modal-image standalone"><img src="'+a(this).children("img").attr("src")+'" /></div>')})};return{Initialize:function(e){t(e)}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.FormsCabinet=UAlberta.Sitecore.FormsCabinet||function(p){var h,f,r,m={MORE_INFO:"More Info",ALL:"All",SELECTED:"selected",NO_RESULTS_FOUND:"No Results Found"};function o(){h.empty();var e,t=p("#category-select").val(),a=p("#searchTextBox").val();if(("select"==t||""==t)&&!a)return p(".category-list-container").show(),void h.parent().hide();p(".category-list-container").hide();var n=p(".multiselect-container").find("input[type=checkbox]:checked").map(function(){return this.value}),i=!1;for(e=0;e<f.length;e++){for(var r=f[e],o=[],s=[],l=!1,c=!1,d=0;d<r.Category.length;d++)r.Category[d].Key==t&&0==n.length?l=!0:-1<p.inArray(r.Category[d].Key,n)&&(l=!0),r.Category[d].IsSubCategory?s.push(r.Category[d].Name):o.push(r.Category[d].Name);if(a){var u=new RegExp(a,"gi");(r.Title.match(u)||r.Description.match(u))&&(c=!0)}(l&&a&&c||l&&!a||!l&&("select"==t||""==t)&&a&&c)&&(h.append("<li><ul><li class='document-name'><a href='"+r.Link+"' target='_blank'><i class='"+r.FileType+"'></i> "+r.Title+"</a></li><li class='main-category'>"+(o.length?o.join(", "):"")+"</li>"+(s.length?"<li class='subcategory'>"+s.join(", ")+"</li>":"")+"<li class='description'>"+r.Description+"</li><li>"+(r.MoreInfo?"<a href='"+r.MoreInfo+"' target='_blank'>"+m.MORE_INFO+"...</a>":"")+"</li></ul></li>"),i=!0)}i||h.append("<li><ul><li>"+m.NO_RESULTS_FOUND+".</li></ul></li>"),h.parent().show()}function s(){o()}function l(){p("#searchTextBox").val(""),p("#category-select").val(p("#category-select option:first").val()),p("#fc-subcategory-wrapper").hide(),p("#category-button > span").text(m.ALL),p(".multiselect-container").find("input[type=checkbox]:checked").prop("checked",!1),o()}function c(){o();var e=this.value,t=p("#subcategory-select");p("#fc-subcategory-wrapper").hide();for(var a=0;a<r.length;a++)if(r[a].Key==e){var n=r[a];if(0<n.SubCategories.length){p("#fc-subcategory-wrapper").show(),t.empty();for(var i=0;i<n.SubCategories.length;i++)t.append('<li class=""><a href="javascript:void(0);"><label class="checkbox"><input type="checkbox" value="'+n.SubCategories[i].Key+'"> '+n.SubCategories[i].Name+"</label></a></li>");p(".multiselect-container").find("input[type=checkbox]").change(d)}break}}function d(){o();var e=p(".multiselect-container").find("input[type=checkbox]:checked").map(function(){return p(this).parent().text().trim()}).toArray();0<e.length&&e.length<4?p("#category-button > span").text(e.join(", ")):3<e.length?p("#category-button > span").text(e.length+" "+m.SELECTED):p("#category-button > span").text(m.ALL)}return{initialize:function(e,t,a,n,i){h=p(".people-content"),m=n,r=e,f=t,i&&p("#category-select").val(i),o(),a||(p("#searchButton").click(s),p("#resetButton").click(l),p("#category-select").change(c),p(".category-list-container").find("a[data-key]").click(function(){p("#category-select").val(this.getAttribute("data-key")).change()}),p("#searchTextBox").keypress(function(e){13==e.which&&s()}))}}}(jQuery);var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.CampsList=UAlberta.Sitecore.CampsList||{GetInstance:function(){return function(p){"use strict";var h={localization:{SELECTED:"Selected",AGES:"Ages",GRADE:"Grade",GRADES:"Grades",CHOOSE_AGE_GRADE:"Choose age range and/or grade",CAMP:"Program",FACULTY:"Faculty",DATES:"Dates",COST:"Cost (+GST)",LOCATION:"Location",ALL_LOCATIONS:"All Locations",NO_CAMPS_FOUND:"No camps were found",CAMPS_INITIAL_MESSAGE:"Please search or select a filter to see the available programs",FULL:"Full"},allCamps:[],refinedCamps:[],filters:{ageLower:0,ageUpper:0,grades:[],location:[],startMonth:[],timeOfDay:[],faculty:[]},filterOptions:{}},f={getUrlParameter:function(e){var t,a,n=decodeURIComponent(window.location.search.substring(1)).split("&");for(a=0;a<n.length;a++)if((t=n[a].split("="))[0]===e)return void 0===t[1]||t[1].toLowerCase();return null},campsMetaNameListToString:function(e,t){for(var a=[],n=0;n<e.length;n++)a.push(t[e[n]].toLowerCase().replace(/ /g,"-"));return a.join(",")},getCampsMetasNames:function(e){var t="";if(e&&e.length){for(var a=0;a<e.length;a++)t+=", "+e[a].Name;t=t.substring(2)}return t},updateFilterArray:function(e,t){if(e&&e.length){if(e[0].selected)-1==t.indexOf(e[0].value)&&t.push(e[0].value);else{var a=t.indexOf(e[0].value);-1<a&&t.splice(a,1)}return!0}return!1},compareCampsMetaIdToFilter:function(e,t){for(var a=!1,n=0;n<e.length;n++)if(-1<t.indexOf(e[n].ID)){a=!0;break}return a}},i={current_request:null,getAllCamps:function(){null!=i.current_request&&i.current_request.abort(),p("#camps").html(""),p("#campsLoading").show(),i.currentRequest=p.ajax({contentType:"application/json; charset=utf-8",dataType:"json",error:function(){i.error(function(){m.displayErrorMessage("There was an issue with loading the camps information. Please visit the page again later.  We apologize for any inconvenience.")})},success:function(e){i.success(e,function(e){h.allCamps=e,function(){p("input[type=checkbox]:checked").prop("checked",!1);var e=f.getUrlParameter("faculty"),t=f.getUrlParameter("grades"),a=f.getUrlParameter("location"),n=f.getUrlParameter("startMonth"),i=f.getUrlParameter("timeOfDay"),r=f.getUrlParameter("age"),o=f.getUrlParameter("search");if(null==e&&null==t&&null==a&&null==n&&null==i&&null==r&&null==o&&g(),null!=e){for(var s in e=e.split(","),h.filterOptions.faculty)-1<e.indexOf(h.filterOptions.faculty[s].toLowerCase())&&h.filters.faculty.push(s);g()}null!=t&&(t=t.split(","),p(".age-grade option").each(function(){var e=p(this);-1!=t.indexOf(e.text().toLowerCase().replace(/ /g,"-"))&&p("input[type=checkbox][value='"+e.val()+"']").click()}),m.updateAgeSelectorText()),null!=a&&(a=a.split(","),p(".location option").each(function(){var e=p(this);-1!=a.indexOf(e.text().toLowerCase().replace(/ /g,"-"))&&p("input[type=checkbox][value='"+e.val()+"']").click()})),null!=n&&(n=n.split(","),p(".start-month option").each(function(){var e=p(this);-1!=n.indexOf(e.text().toLowerCase().replace(/ /g,"-"))&&p("input[type=checkbox][value='"+e.val()+"']").click()})),null!=i&&(i=i.split(","),p(".time-of-day option").each(function(){var e=p(this);-1!=i.indexOf(e.text().toLowerCase().replace(/ /g,"-"))&&p("input[type=checkbox][value='"+e.val()+"']").click()})),null!=r&&(r=r.split(","),h.filters.ageLower=parseInt(r[0]),h.filters.ageUpper=parseInt(r[1]),p("#ageRange").slider("setValue",[h.filters.ageLower,h.filters.ageUpper],!0,!0),m.updateAgeSelectorText(),g()),null!=o&&(o=decodeURIComponent(o),m.searchBox.val(o),m.searchButton.click())}()})},url:"/api/camps.json"})},searchCamps:function(e){null!=i.current_request&&i.current_request.abort(),p("#camps").html(""),p("#campsLoading").show(),i.currentRequest=p.ajax({contentType:"application/json; charset=utf-8",dataType:"json",error:function(){i.error(function(){m.displayErrorMessage("There was an issue with loading the camps information. Please visit the page again later.  We apologize for any inconvenience.")})},success:function(e){i.success(e,function(e){h.allCamps=e,g()})},url:"/api/camps/search/"+encodeURIComponent(e)})},error:function(e){p("#campsLoading").hide(),e(),i.current_request=void 0},success:function(e,t){p("#campsLoading").hide(),t(e),i.current_request=void 0}},m={setup:function(e){m.container=p("#"+e),m.ageGrade=m.container.find(".age-grade"),m.location=m.container.find(".location"),m.startMonth=m.container.find(".start-month"),m.timeOfDay=m.container.find(".time-of-day"),m.searchBox=m.container.find("#campsSearchBox"),m.searchButton=m.container.find("#campsSearchButton"),m.resetButton=m.container.find("#campsResetButton"),m.ageSelector(m.ageGrade),m.location.multiselect({nonSelectedText:"",nSelectedText:UAlberta.Sitecore.Localization.SELECTED,numSelectedOptionsText:2,onChange:function(e){f.updateFilterArray(e,h.filters.location)&&g()}}),m.startMonth.multiselect({nonSelectedText:"",nSelectedText:UAlberta.Sitecore.Localization.SELECTED,numSelectedOptionsText:2,onChange:function(e){f.updateFilterArray(e,h.filters.startMonth)&&g()}}),m.timeOfDay.multiselect({nonSelectedText:"",nSelectedText:UAlberta.Sitecore.Localization.SELECTED,numSelectedOptionsText:2,onChange:function(e){f.updateFilterArray(e,h.filters.timeOfDay)&&g()}}),m.searchBox.on("keyup",function(e){if(13==e.keyCode){var t=m.searchBox.val().trim();""!=t&&(m.searchBox.val(t),i.searchCamps(t))}}),m.searchButton.click(function(){var e=m.searchBox.val().trim();""!=e&&(m.searchBox.val(e),i.searchCamps(e))}),m.resetButton.click(m.resetCamps)},ageSelector:function(e){for(var t=0;t<e.length;t++){var a=p(e[t]),n=a.find("option"),i="<div class='btn-group'><button id='ageSelector' type='button' class='multiselect dropdown-toggle btn' data-toggle='dropdown'><b class='caret'></b></button><ul id='ageSelectorDropdown' class='multiselect-container dropdown-menu'><li>"+h.localization.CHOOSE_AGE_GRADE+"</li><li class='age-selector-container'><div class='age-range-text'><strong>"+h.localization.AGES+" 1 - 18</strong></div><b>1</b> <input id='ageRange' type='text' class='span2' value='1,18' data-slider-min='1' data-slider-max='18' data-slider-step='1' data-slider-value='[1,18]'/> <b>18</b></li><li><strong>"+h.localization.GRADE+"</strong></li><li class='grade-selector-container row'><ul class='first-grades span6'></ul><ul class='second-grades span6'></ul></li></ul></div>";p(i).insertAfter(a),a.hide();for(var r=a.parent(),o=Math.ceil(n.length/2),s=r.find(".first-grades"),l=r.find(".second-grades"),c=0;c<n.length;c++){var d=p(n[c]),u='<li><a href="javascript:void(0);"><label class="checkbox"><input type="checkbox" value="'+d.val()+'"> '+d.text()+"</label></a></li>";c<o?s.append(u):l.append(u)}p("#ageRange").slider({}).on("slide",m.ageSelectorChange).on("slideStop",function(e){e&&e.value.length&&(h.filters.ageLower=e.value[0],h.filters.ageUpper=e.value[1],m.updateAgeSelectorText(),g())}),p("#ageSelectorDropdown li a",r).on("touchstart click",function(e){e.stopPropagation(),p(e.target).blur()}),p(".slider-handle",r).on("touchstart click",function(e){e.stopPropagation(),p(e.target).blur()}),p(".grade-selector-container li input").on("change",p.proxy(function(e){var t=p(e.target).prop("checked")||!1,a=p("option",this.ageGrade).filter(function(){return p(this).val()==p(e.target).val()});t?(a.prop("selected",!0),a.attr("selected","selected")):a.removeAttr("selected").prop("selected",!1),f.updateFilterArray(a,h.filters.grades)&&g(),this.ageGrade.change(),m.updateAgeSelectorText()},this))}},ageSelectorChange:function(e){p(".age-range-text").html("<strong>"+h.localization.AGES+" "+e.value[0]+" - "+e.value[1]+"</strong>"),m.updateAgeSelectorText()},updateAgeSelectorText:function(){var t="";if(0!=h.filters.ageLower&&0!=h.filters.ageUpper){var e=p("#ageRange").val().split(",",2);t=h.localization.AGES+" "+e[0]+" - "+e[1]+", "}var a=p("option[selected]",this.ageGrade);2<a.length?t+=a.length+" "+h.localization.GRADES+" "+UAlberta.Sitecore.Localization.SELECTED:(a.each(function(){var e=void 0!==p(this).attr("label")?p(this).attr("label"):p(this).html();t+=e+", "}),t=t.substr(0,t.length-2)),t+='<b class="caret"></b>',p("#ageSelector").html(t)},displayRefinedCamps:function(){var e=[];e.push("<tr class='white'><th><h4>"+h.localization.CAMP+"</h4></th><th><h4>"+h.localization.FACULTY+"</h4></th><th><h4>"+h.localization.AGES+"/"+h.localization.GRADES+"</h4></th><th><h4>"+h.localization.DATES+"</h4></th><th><h4>"+h.localization.COST+"</h4></th><th><h4>"+h.localization.LOCATION+"</h4></th></tr>");for(var t=0;t<h.refinedCamps.length;t++)for(var a=h.refinedCamps[t],n=f.getCampsMetasNames(a.Faculty),i="",r=0;r<a.Sessions.length;r++){var o=a.Sessions[r],s=o.Grades.length?h.localization.GRADE+" "+f.getCampsMetasNames(o.Grades).replace(/grade/gi,""):"",l="";o.AgeLower&&(l=h.localization.AGES+" "+o.AgeLower,o.AgeUpper&&o.AgeLower!=o.AgeUpper&&(l+=" - "+o.AgeUpper),s&&(l=" ( "+l+" )")),e.push("<tr class='"+i+"'><td data-th='"+h.localization.CAMP+"'><a href='"+a.Link+"'>"+o.Name+"</a></td><td data-th='"+h.localization.FACULTY+"'>"+n+"</td><td data-th='"+h.localization.AGES+"/"+h.localization.GRADES+"'>"+s+l+"</td><td data-th='"+h.localization.DATES+"'>"+o.Date+"</td><td data-th='"+h.localization.COST+"'>"+(o.Full?h.localization.FULL:"$"+o.Cost)+"</td><td data-th='"+h.localization.LOCATION+"'>"+f.getCampsMetasNames(o.Location)+"</td></tr>"),i=""==i?"white":""}1<e.length?p("#camps").html(e.join("")).show():p("#camps").html("<tr class='white'><td>"+h.localization.NO_CAMPS_FOUND+"</td></d></tr>").show()},updateUrlParameters:function(){var e=[];h.filters.faculty.length&&e.push("faculty="+f.campsMetaNameListToString(h.filters.faculty,h.filterOptions.faculty)),h.filters.grades.length&&e.push("grades="+f.campsMetaNameListToString(h.filters.grades,h.filterOptions.grades)),h.filters.location.length&&e.push("location="+f.campsMetaNameListToString(h.filters.location,h.filterOptions.location)),h.filters.startMonth.length&&e.push("startMonth="+f.campsMetaNameListToString(h.filters.startMonth,h.filterOptions.startMonth)),h.filters.timeOfDay.length&&e.push("timeOfDay="+f.campsMetaNameListToString(h.filters.timeOfDay,h.filterOptions.timeOfDay)),0!=h.filters.ageLower&&0!=h.filters.ageUpper&&e.push("age="+h.filters.ageLower+","+h.filters.ageUpper),""!=m.searchBox.val()&&e.push("search="+encodeURIComponent(m.searchBox.val())),window.history.replaceState("camps",document.title,window.location.protocol+"//"+window.location.hostname+window.location.pathname+(e.length?"?"+e.join("&"):""))},resetCamps:function(){m.searchBox.val(""),h.filters.ageLower=0,h.filters.ageUpper=0,h.filters.grades=[],h.filters.location=[],h.filters.startMonth=[],h.filters.timeOfDay=[],h.filters.faculty=[],m.updateUrlParameters(),p("#ageRange").slider("setValue",[1,18],!0,!1),p(".age-grade option, .location option, .start-month option, .time-of-day option").each(function(){p("input[type=checkbox][value='"+p(this).val()+"']:checked").click()}),m.updateAgeSelectorText(),i.getAllCamps(),p("#camps").html("")},displayErrorMessage:function(e){p("#camps").html("<tr class='white'><td>"+e+"</td></tr>")}};function g(){if(h.refinedCamps=[],h.filters.faculty.length||0!=h.filters.ageLower||0!=h.filters.ageUpper||h.filters.timeOfDay.length||h.filters.startMonth.length||h.filters.grades.length||h.filters.location.length)for(var e=0;e<h.allCamps.length;e++){var t=h.allCamps[e],a=p.extend({},t);a.Sessions=[];for(var n=0;n<t.Sessions.length;n++){var i=null,r=null,o=null,s=null,l=null,c=null;0!=h.filters.ageLower&&0!=h.filters.ageUpper&&(i=h.filters.ageLower>=t.Sessions[n].AgeLower&&h.filters.ageLower<=t.Sessions[n].AgeUpper||h.filters.ageUpper>=t.Sessions[n].AgeLower&&h.filters.ageUpper<=t.Sessions[n].AgeUpper||h.filters.ageLower<t.Sessions[n].AgeLower&&h.filters.ageUpper>t.Sessions[n].AgeUpper),h.filters.grades.length&&(r=f.compareCampsMetaIdToFilter(t.Sessions[n].Grades,h.filters.grades)),h.filters.location.length&&(o=f.compareCampsMetaIdToFilter(t.Sessions[n].Location,h.filters.location)),h.filters.startMonth.length&&(s=f.compareCampsMetaIdToFilter(t.Sessions[n].StartMonth,h.filters.startMonth)),h.filters.timeOfDay.length&&(l=f.compareCampsMetaIdToFilter(t.Sessions[n].TimeOfDay,h.filters.timeOfDay)),h.filters.faculty.length&&(c=f.compareCampsMetaIdToFilter(t.Faculty,h.filters.faculty)),(null!=i&&null!=r&&(1==i||1==r)||(null!=i&&1==i||null==i)&&(null!=r&&1==r||null==r))&&(null!=o&&1==o||null==o)&&(null!=s&&1==s||null==s)&&(null!=l&&1==l||null==l)&&(null!=c&&1==c||null==c)&&a.Sessions.push(t.Sessions[n])}a.Sessions.length&&h.refinedCamps.push(a)}else h.refinedCamps=h.allCamps;m.displayRefinedCamps(),m.updateUrlParameters()}return{Initialize:function(e,t,a,n){t||(p.extend(h.filterOptions,a),p.extend(h.Localizations,n),m.setup(e),i.getAllCamps())}}}(jQuery)}};var UAlberta=UAlberta||{};UAlberta.Sitecore=UAlberta.Sitecore||{},UAlberta.Sitecore.TeaserDataListTwoColumn=UAlberta.Sitecore.TeaserDataListTwoColumn||{GetInstance:function(){return function(i){"use strict";var c={feeds:[],options:{showDescriptions:!1,showDate:!1,showImages:!1,showSource:!1}},n={ERROR_ITEM_INFORMATION:"An error occurred while obtaining item information. Please refresh the page and try again."},r={getItems:function(){for(var e=0;e<c.feeds.length;e++)i.ajax({cache:!1,dataType:"json",error:function(e){return function(){r.Events.error(e)}}(e),success:function(t){return function(e){r.Events.success(t,e)}}(e),url:"https://api.ualberta.cloud/news?feed="+encodeURIComponent(c.feeds[e].source)})},Events:{error:function(e){var t=i(c.feeds[e].itemList);t.find(".loading").remove(),t.prepend("<li><p>"+n.ERROR_ITEM_INFORMATION+"</p></li>")},success:function(e,t){d.showItems(t.Items,e)}}},d={setup:function(e){for(var t=i("#"+e+" ul"),a=0;a<c.feeds.length;a++)t.hasOwnProperty(a)&&(c.feeds[a].itemList=t[a])},showItems:function(e,t){var a=i(c.feeds[t].itemList);a.find(".loading").remove();for(var n=0;n<e.length&&!(n>=c.feeds[t].displayLimit);n++)d.addItem(e[n],a)},addItem:function(e,t){if(""!=e.Title.Content){var a=e.Title.Content;if(c.options.showDate&&(a+='<p class="list-item-extra">'+d.getDate(e)+"</p>"),c.options.showSource&&null!=e.SourceFeed&&null!=e.SourceFeed.Title&&null!=e.SourceFeed.Title.Content){var n=e.SourceFeed.Title.Content;null!=e.SourceFeed.Links&&0<e.SourceFeed.Links.length&&(n='<a href="'+e.SourceFeed.Links[0].Uri+'">'+n+"</a>"),a+='<p class="list-item-extra">'+n+"</p>"}!c.options.showDescriptions||null==e.Summary.Content&&null==e.Content.Content||(a+='<p class="list-item-description">'+(null!=e.Summary.Content?e.Summary.Content:e.Content.Content)+"</p>");var i="",r="";if(c.options.showImages)for(var o=0;o<e.Links.length;o++){var s;null!=(s=e.Links[o]).MediaType&&-1!==s.MediaType.toLowerCase().indexOf("image")&&(r='<div class="list-item-image frame"><img alt="" src="'+s.Uri+'" /></div>')}i=""!=(s=d.getLink(e))?'<a href="'+d.getLink(e)+'">'+r+a+"</a>":r+a;var l="";""==s&&(l+="list-content-item"),t.append("<li"+(""==l?"":' class="'+l.trim()+'"')+">"+i+"</li>")}},getLink:function(e){if(e.Links&&0<e.Links.length){for(var t=0;t<e.Links.length;t++){var a=e.Links[t];if(null!=a.RelationshipType&&"alternate"==a.RelationshipType.toLowerCase())return a.Uri}return e.Links[0].Uri}return""},getDate:function(e){return null!=e.GoogleCalendarWhen?e.GoogleCalendarWhen:UAlberta.Sitecore.Utilities.GetDateFromJson(e.PublishDate,UAlberta.Sitecore.Utilities.DateFormat.Short)}};return{Initialize:function(e,t,a){t.length?(c.feeds=t,a&&a.ERROR_ITEM_INFORMATION&&(n.ERROR_ITEM_INFORMATION=a.ERROR_ITEM_INFORMATION),d.setup(e),r.getItems()):console.log("Teaser data list feeds not configured correctly.")}}}(jQuery)}};